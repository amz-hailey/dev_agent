<!DOCTYPE html>
<html lang="ko" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GenOS — 설정</title>

    <link rel="stylesheet" href="../cdn/tailwind.css">
    <script defer src="../cdn/alpine.js"></script>
    <script src="../cdn/lucide.js"></script>



    <style>
        .scrollbar-thin::-webkit-scrollbar { width: 4px; }
        .scrollbar-thin::-webkit-scrollbar-track { background: transparent; }
        .scrollbar-thin::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 2px; }
        .scrollbar-thin::-webkit-scrollbar-thumb:hover { background: #cbd5e1; }
        @keyframes slideDown { from { opacity:0; transform:translateY(-8px); } to { opacity:1; transform:translateY(0); } }
        .slide-down { animation: slideDown 0.25s ease-out; }

        /* Toggle switch */
        .toggle-track { width: 36px; height: 20px; border-radius: 10px; padding: 2px; cursor: pointer; transition: background-color 0.2s; }
        .toggle-track.active { background-color: #0f172a; }
        .toggle-track.inactive { background-color: #cbd5e1; }
        .toggle-track.disabled { background-color: #e2e8f0; cursor: not-allowed; }
        .toggle-thumb { width: 16px; height: 16px; border-radius: 50%; background: white; transition: transform 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.1); }
        .toggle-track.active .toggle-thumb { transform: translateX(16px); }

        /* Password strength */
        .strength-bar { height: 4px; border-radius: 2px; transition: width 0.3s, background-color 0.3s; }
    </style>
</head>
<body class="h-full bg-slate-50 font-sans antialiased">

<div x-data="settingsPage()" class="flex h-full min-h-screen">

    <!-- ==================== SIDEBAR ==================== -->
    <aside class="w-[240px] bg-white border-r border-slate-200 flex flex-col flex-shrink-0 h-screen sticky top-0">
        <div class="h-16 flex items-center gap-2.5 px-5 border-b border-slate-100">
            <div class="w-8 h-8 rounded-lg bg-slate-900 flex items-center justify-center">
                <i data-lucide="shield-check" class="w-5 h-5 text-white"></i>
            </div>
            <span class="text-lg font-bold text-slate-900 tracking-tight">GenOS</span>
        </div>
        <nav class="flex-1 overflow-y-auto scrollbar-thin py-4 px-3">
            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5">보안 운영</p>
            <a href="../PG-02_dashboard.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="layout-dashboard" class="w-4 h-4"></i> 메인 대시보드
            </a>
            <a href="../PG-06_realtime_monitoring.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="activity" class="w-4 h-4"></i> 실시간 모니터링
            </a>
            <a href="../PG-07_alert_management.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="bell" class="w-4 h-4"></i> 알림 관리
                <span class="ml-auto text-[11px] bg-red-100 text-red-700 font-medium px-1.5 py-0.5 rounded-full">3</span>
            </a>
            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">에이전트 관리</p>
            <a href="../PG-03_agent_templates.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="boxes" class="w-4 h-4"></i> 템플릿 라이브러리
            </a>
            <a href="../PG-04_deploy_wizard.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="rocket" class="w-4 h-4"></i> 배포 위저드
            </a>
            <a href="../PG-05_connector_hub.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="plug" class="w-4 h-4"></i> 커넥터 허브
            </a>

            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">자동화</p>
            <a href="../PG-13_workflow_builder.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="git-branch" class="w-4 h-4"></i> 워크플로우 빌더</a>

            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">리포팅 · 감사</p>
            <a href="../PG-08_compliance_reports.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="file-text" class="w-4 h-4"></i> 컴플라이언스 리포트
            </a>
            <a href="../PG-09_audit_log.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="scroll-text" class="w-4 h-4"></i> 감사 로그
            </a>
            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">시스템 관리</p>
            <a href="../PG-10_user_permissions.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="users" class="w-4 h-4"></i> 사용자/권한
            </a>
            <a href="../PG-11_system_dr.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="server" class="w-4 h-4"></i> 시스템/DR
            </a>
            <a href="../PG-12_settings.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm font-medium bg-slate-100 text-slate-900 mb-0.5">
                <i data-lucide="settings" class="w-4 h-4"></i> 설정
            </a>


            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">고도화</p>
            <a href="../PG-15_ai_pipeline.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="brain-circuit" class="w-4 h-4"></i> AI 재학습 파이프라인</a>

            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">내부 관리</p>
            <a href="../PG-14_customer_health.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="heart-pulse" class="w-4 h-4"></i> 고객 Health</a>
            <a href="../PG-16_benchmarking.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="bar-chart-horizontal" class="w-4 h-4"></i> 벤치마킹</a>

        </nav>
        <div class="border-t border-slate-100 p-3">
            <div class="flex items-center gap-2.5 px-2 py-1.5">
                <div class="w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-xs font-bold text-slate-600">김</div>
                <div class="flex-1 min-w-0">
                    <p class="text-sm font-medium text-slate-900 truncate">김부장</p>
                    <p class="text-[11px] text-slate-400 truncate">IT 보안팀</p>
                </div>
                <button class="text-slate-400 hover:text-slate-600 transition-colors">
                    <i data-lucide="log-out" class="w-4 h-4"></i>
                </button>
            </div>
        </div>
    </aside>

    <!-- ==================== MAIN CONTENT ==================== -->
    <main class="flex-1 flex flex-col min-w-0">

        <!-- Header -->
        <header class="h-16 bg-white border-b border-slate-200 flex items-center justify-between px-8 flex-shrink-0">
            <div>
                <h1 class="text-lg font-bold text-slate-900">설정</h1>
                <p class="text-xs text-slate-500">프로필, 보안, 알림, 표시 설정 관리</p>
            </div>
        </header>

        <div class="flex-1 overflow-y-auto">
            <div class="max-w-3xl mx-auto py-8 px-8">

                <!-- Section Nav Tabs -->
                <div data-component="tab" data-intent="default" data-variant="segment" data-size="md" data-state="default" role="tablist" class="flex border-b border-slate-200 mb-8">
                    <template x-for="tab in ['프로필', '보안', '알림', '표시']" :key="tab">
                        <button @click="activeTab = tab"
                                role="tab"
                                :aria-selected="activeTab === tab"
                                :data-state="activeTab === tab ? 'selected' : 'default'"
                                class="px-4 py-2.5 text-sm font-medium border-b-2 transition-colors -mb-px"
                                :class="activeTab === tab ? 'border-slate-900 text-slate-900' : 'border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300'"
                                x-text="tab"></button>
                    </template>
                </div>

                <!-- ==================== PROFILE SETTINGS ==================== -->
                <div x-show="activeTab === '프로필'" x-transition class="space-y-6">
                    <div data-component="card" data-intent="default" data-variant="outline" data-size="auto" data-state="default" class="flex items-center gap-5 mb-6">
                        <div class="relative">
                            <div class="w-20 h-20 rounded-full bg-slate-200 flex items-center justify-center text-2xl font-bold text-slate-500">김</div>
                            <button class="absolute bottom-0 right-0 w-7 h-7 bg-slate-900 text-white rounded-full flex items-center justify-center hover:bg-slate-800 transition-colors shadow">
                                <i data-lucide="camera" class="w-3.5 h-3.5"></i>
                            </button>
                        </div>
                        <div>
                            <p class="text-sm font-semibold text-slate-900">프로필 이미지</p>
                            <p class="text-xs text-slate-500">JPG, PNG, WebP 형식 · 최대 2MB</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-medium text-slate-700 mb-1.5">이름 <span class="text-red-500">*</span></label>
                            <input type="text" x-model="profile.name" placeholder="이름"
                                   class="w-full h-10 px-3 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1">
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-slate-700 mb-1.5">
                                이메일 <span class="text-red-500">*</span>
                                <span x-show="profile.isSso" class="ml-1 text-[10px] text-slate-400 font-normal">(SSO 관리)</span>
                            </label>
                            <input type="email" x-model="profile.email" placeholder="이메일"
                                   :readonly="profile.isSso"
                                   :class="profile.isSso ? 'bg-slate-50 text-slate-500 cursor-not-allowed' : ''"
                                   class="w-full h-10 px-3 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1">
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-slate-700 mb-1.5">부서</label>
                            <input type="text" x-model="profile.department" placeholder="부서"
                                   class="w-full h-10 px-3 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1">
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-slate-700 mb-1.5">직책</label>
                            <input type="text" x-model="profile.jobTitle" placeholder="직책"
                                   class="w-full h-10 px-3 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1">
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-slate-700 mb-1.5">연락처</label>
                            <input type="tel" x-model="profile.phone" placeholder="010-0000-0000"
                                   class="w-full h-10 px-3 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1">
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-slate-700 mb-1.5">시간대 <span class="text-red-500">*</span></label>
                            <select x-model="profile.timezone"
                                    class="w-full h-10 px-3 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1">
                                <option>Asia/Seoul (KST, UTC+9)</option>
                                <option>Asia/Tokyo (JST, UTC+9)</option>
                                <option>UTC</option>
                            </select>
                        </div>
                    </div>

                    <div class="flex justify-end gap-2 pt-4 border-t border-slate-100">
                        <button class="px-4 h-10 text-sm border border-slate-200 rounded-md hover:bg-slate-50 transition-colors">취소</button>
                        <button class="px-4 h-10 text-sm bg-slate-900 text-white rounded-md hover:bg-slate-800 transition-colors">저장</button>
                    </div>
                </div>

                <!-- ==================== SECURITY SETTINGS ==================== -->
                <div x-show="activeTab === '보안'" x-transition class="space-y-8">

                    <!-- MFA -->
                    <div>
                        <h3 class="text-sm font-semibold text-slate-900 mb-4">MFA (다중 인증)</h3>
                        <div data-component="card" data-intent="default" data-variant="outline" data-size="auto" data-state="default" class="p-4 bg-slate-50 rounded-lg space-y-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-slate-900">MFA 활성화</p>
                                    <p class="text-xs text-slate-500 mt-0.5">금융권 보안 정책에 따라 MFA 필수 활성화</p>
                                </div>
                                <div class="flex items-center gap-2">
                                    <div @click="security.mfaEnforced ? null : security.mfaEnabled = !security.mfaEnabled"
                                         class="toggle-track"
                                         :class="security.mfaEnforced ? 'disabled active' : (security.mfaEnabled ? 'active' : 'inactive')">
                                        <div class="toggle-thumb"></div>
                                    </div>
                                    <template x-if="security.mfaEnforced">
                                        <span data-component="badge" data-intent="neutral" data-variant="filled-light" data-size="xs" data-state="default" class="text-[10px] text-slate-400 flex items-center gap-1 rounded-full">
                                            <i data-lucide="lock" class="w-3 h-3"></i> 정책 강제
                                        </span>
                                    </template>
                                </div>
                            </div>
                            <div x-show="security.mfaEnabled" x-transition>
                                <label class="block text-xs font-medium text-slate-700 mb-1.5">MFA 인증 방식</label>
                                <select x-model="security.mfaMethod"
                                        class="w-full max-w-xs h-10 px-3 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1">
                                    <option>TOTP (인증 앱)</option>
                                    <option>SMS 인증</option>
                                    <option>이메일 인증</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Password Change -->
                    <div>
                        <h3 class="text-sm font-semibold text-slate-900 mb-4">비밀번호 변경</h3>
                        <div class="space-y-4 max-w-md">
                            <div>
                                <label class="block text-xs font-medium text-slate-700 mb-1.5">현재 비밀번호</label>
                                <input type="password" x-model="security.currentPw" placeholder="현재 비밀번호"
                                       class="w-full h-10 px-3 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1">
                            </div>
                            <div>
                                <label class="block text-xs font-medium text-slate-700 mb-1.5">새 비밀번호</label>
                                <input type="password" x-model="security.newPw" placeholder="최소 12자, 대/소문자+숫자+특수문자"
                                       class="w-full h-10 px-3 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1">
                                <!-- Strength Indicator -->
                                <div x-show="security.newPw" class="mt-2">
                                    <div class="flex gap-1 mb-1">
                                        <div class="flex-1 h-1 rounded-full" :class="pwStrength >= 1 ? pwStrengthColor : 'bg-slate-200'"></div>
                                        <div class="flex-1 h-1 rounded-full" :class="pwStrength >= 2 ? pwStrengthColor : 'bg-slate-200'"></div>
                                        <div class="flex-1 h-1 rounded-full" :class="pwStrength >= 3 ? pwStrengthColor : 'bg-slate-200'"></div>
                                        <div class="flex-1 h-1 rounded-full" :class="pwStrength >= 4 ? pwStrengthColor : 'bg-slate-200'"></div>
                                    </div>
                                    <p class="text-[10px]" :class="pwStrengthTextColor" x-text="pwStrengthLabel"></p>
                                </div>
                            </div>
                            <div>
                                <label class="block text-xs font-medium text-slate-700 mb-1.5">새 비밀번호 확인</label>
                                <input type="password" x-model="security.confirmPw" placeholder="새 비밀번호 재입력"
                                       class="w-full h-10 px-3 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1">
                                <template x-if="security.confirmPw && security.newPw !== security.confirmPw">
                                    <p class="text-[10px] text-red-500 mt-1">비밀번호가 일치하지 않습니다</p>
                                </template>
                            </div>
                            <button class="px-4 h-10 text-sm bg-slate-900 text-white rounded-md hover:bg-slate-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                                    :disabled="!security.currentPw || !security.newPw || security.newPw !== security.confirmPw || pwStrength < 3">
                                비밀번호 변경
                            </button>
                        </div>
                    </div>

                    <!-- Session -->
                    <div>
                        <h3 class="text-sm font-semibold text-slate-900 mb-4">세션 관리</h3>
                        <div class="mb-4">
                            <label class="block text-xs font-medium text-slate-700 mb-1.5">세션 타임아웃</label>
                            <select x-model="security.sessionTimeout"
                                    class="w-full max-w-xs h-10 px-3 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1">
                                <option>15분</option>
                                <option>30분</option>
                                <option>1시간</option>
                                <option>2시간</option>
                            </select>
                        </div>
                        <div>
                            <div class="flex items-center justify-between mb-3">
                                <p class="text-xs font-medium text-slate-700">활성 세션</p>
                                <button class="text-xs text-red-600 hover:text-red-700 font-medium transition-colors">모든 세션 종료 (현재 제외)</button>
                            </div>
                            <div class="space-y-2">
                                <template x-for="sess in security.sessions" :key="sess.id">
                                    <div data-component="card" data-intent="default" data-variant="outline" data-size="auto" data-state="default" class="flex items-center justify-between p-3 bg-slate-50 rounded-lg">
                                        <div class="flex items-center gap-3">
                                            <div class="w-8 h-8 rounded-lg bg-white border border-slate-200 flex items-center justify-center">
                                                <i :data-lucide="sess.icon" class="w-4 h-4 text-slate-500"></i>
                                            </div>
                                            <div>
                                                <div class="flex items-center gap-2">
                                                    <p class="text-sm font-medium text-slate-900" x-text="sess.device"></p>
                                                    <template x-if="sess.current">
                                                        <span data-component="badge" data-intent="success" data-variant="filled-light" data-size="xs" data-state="default" class="text-[10px] bg-emerald-50 text-emerald-700 px-1.5 py-0.5 rounded-full font-medium">현재 세션</span>
                                                    </template>
                                                </div>
                                                <p class="text-[11px] text-slate-500" x-text="sess.ip + ' · ' + sess.location + ' · ' + sess.lastActive"></p>
                                            </div>
                                        </div>
                                        <template x-if="!sess.current">
                                            <button class="text-xs text-red-600 hover:text-red-700 font-medium transition-colors">종료</button>
                                        </template>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ==================== NOTIFICATION PREFERENCES ==================== -->
                <div x-show="activeTab === '알림'" x-transition class="space-y-8">

                    <!-- Channels -->
                    <div>
                        <h3 class="text-sm font-semibold text-slate-900 mb-4">알림 채널</h3>
                        <div class="space-y-3">
                            <template x-for="ch in notif.channels" :key="ch.key">
                                <div data-component="card" data-intent="default" data-variant="outline" data-size="auto" data-state="default" class="flex items-center justify-between p-4 bg-slate-50 rounded-lg">
                                    <div class="flex items-center gap-3">
                                        <div class="w-8 h-8 rounded-lg flex items-center justify-center"
                                             :class="ch.enabled ? 'bg-slate-900' : 'bg-slate-300'">
                                            <i :data-lucide="ch.icon" class="w-4 h-4 text-white"></i>
                                        </div>
                                        <div>
                                            <p class="text-sm font-medium text-slate-900" x-text="ch.label"></p>
                                            <p class="text-[11px] text-slate-500" x-text="ch.desc"></p>
                                        </div>
                                    </div>
                                    <div @click="ch.enabled = !ch.enabled"
                                         class="toggle-track"
                                         :class="ch.enabled ? 'active' : 'inactive'">
                                        <div class="toggle-thumb"></div>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </div>

                    <!-- Severity Filter -->
                    <div>
                        <h3 class="text-sm font-semibold text-slate-900 mb-4">알림 심각도 필터</h3>
                        <p class="text-xs text-slate-500 mb-3">선택한 심각도의 알림만 수신합니다</p>
                        <div class="flex flex-wrap gap-2">
                            <template x-for="sev in notif.severities" :key="sev.key">
                                <button @click="sev.key === 'CRITICAL' ? null : sev.enabled = !sev.enabled"
                                        class="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-md border transition-colors"
                                        :class="sev.enabled ? sev.activeClass : 'border-slate-200 text-slate-400 bg-white'"
                                        :title="sev.key === 'CRITICAL' ? 'CRITICAL 알림은 비활성화할 수 없습니다' : ''">
                                    <template x-if="sev.key === 'CRITICAL' && sev.enabled">
                                        <i data-lucide="lock" class="w-3 h-3"></i>
                                    </template>
                                    <span x-text="sev.key"></span>
                                </button>
                            </template>
                        </div>
                    </div>

                    <!-- Quiet Hours -->
                    <div>
                        <h3 class="text-sm font-semibold text-slate-900 mb-4">방해 금지 시간</h3>
                        <div data-component="card" data-intent="default" data-variant="outline" data-size="auto" data-state="default" class="p-4 bg-slate-50 rounded-lg space-y-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-slate-900">방해 금지 모드</p>
                                    <p class="text-xs text-slate-500 mt-0.5">설정 시간 동안 알림을 일시 중지합니다 (CRITICAL 예외)</p>
                                </div>
                                <div @click="notif.quietEnabled = !notif.quietEnabled"
                                     class="toggle-track"
                                     :class="notif.quietEnabled ? 'active' : 'inactive'">
                                    <div class="toggle-thumb"></div>
                                </div>
                            </div>
                            <div x-show="notif.quietEnabled" x-transition class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-xs font-medium text-slate-700 mb-1.5">시작 시각</label>
                                    <input type="time" x-model="notif.quietStart"
                                           class="w-full h-10 px-3 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1">
                                </div>
                                <div>
                                    <label class="block text-xs font-medium text-slate-700 mb-1.5">종료 시각</label>
                                    <input type="time" x-model="notif.quietEnd"
                                           class="w-full h-10 px-3 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1">
                                </div>
                            </div>
                            <template x-if="notif.quietEnabled">
                                <div data-component="alert" data-intent="warning" data-variant="banner" data-size="md" data-state="default" role="status" class="flex items-center gap-2 p-2 bg-amber-50 border border-amber-200 rounded-md text-xs text-amber-700">
                                    <i data-lucide="info" class="w-3.5 h-3.5 flex-shrink-0"></i>
                                    <span>CRITICAL 등급 알림은 방해 금지 시간에도 수신됩니다</span>
                                </div>
                            </template>
                        </div>
                    </div>

                    <!-- Digest -->
                    <div>
                        <h3 class="text-sm font-semibold text-slate-900 mb-4">알림 요약</h3>
                        <select x-model="notif.digestFreq"
                                class="w-full max-w-xs h-10 px-3 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1">
                            <option>실시간 (개별 발송)</option>
                            <option>매시간 요약</option>
                            <option>일일 요약</option>
                            <option>수신 안 함</option>
                        </select>
                    </div>

                    <div class="flex justify-end gap-2 pt-4 border-t border-slate-100">
                        <button class="px-4 h-10 text-sm text-slate-600 border border-slate-200 rounded-md hover:bg-slate-50 transition-colors">기본값 복원</button>
                        <button class="px-4 h-10 text-sm bg-slate-900 text-white rounded-md hover:bg-slate-800 transition-colors">저장</button>
                    </div>
                </div>

                <!-- ==================== DISPLAY SETTINGS ==================== -->
                <div x-show="activeTab === '표시'" x-transition class="space-y-6">

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-medium text-slate-700 mb-1.5">테마</label>
                            <select x-model="display.theme"
                                    class="w-full h-10 px-3 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1">
                                <option>라이트</option>
                                <option>다크</option>
                                <option>시스템 설정 따르기</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-slate-700 mb-1.5">글꼴 크기</label>
                            <select x-model="display.fontSize"
                                    class="w-full h-10 px-3 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1">
                                <option>작게 (12px)</option>
                                <option>보통 (14px)</option>
                                <option>크게 (16px)</option>
                                <option>매우 크게 (18px)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-slate-700 mb-1.5">표시 밀도</label>
                            <select x-model="display.density"
                                    class="w-full h-10 px-3 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1">
                                <option>좁게 (Compact)</option>
                                <option>보통 (Default)</option>
                                <option>넓게 (Comfortable)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-slate-700 mb-1.5">언어</label>
                            <select x-model="display.language"
                                    class="w-full h-10 px-3 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1">
                                <option>한국어</option>
                                <option>English</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-slate-700 mb-1.5">날짜 형식</label>
                            <select x-model="display.dateFormat"
                                    class="w-full h-10 px-3 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1">
                                <option>YYYY-MM-DD</option>
                                <option>YYYY/MM/DD</option>
                                <option>DD/MM/YYYY</option>
                                <option>MM/DD/YYYY</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-slate-700 mb-1.5">숫자 형식</label>
                            <select x-model="display.numberFormat"
                                    class="w-full h-10 px-3 text-sm border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1">
                                <option>1,234.56 (한국/미국)</option>
                                <option>1.234,56 (유럽)</option>
                            </select>
                        </div>
                    </div>

                    <!-- Toggle Options -->
                    <div class="space-y-3 pt-2">
                        <div data-component="card" data-intent="default" data-variant="outline" data-size="auto" data-state="default" class="flex items-center justify-between p-4 bg-slate-50 rounded-lg">
                            <div>
                                <p class="text-sm font-medium text-slate-900">고대비 모드</p>
                                <p class="text-xs text-slate-500 mt-0.5">WCAG AAA 수준의 색상 대비 강화</p>
                            </div>
                            <div @click="display.highContrast = !display.highContrast"
                                 class="toggle-track"
                                 :class="display.highContrast ? 'active' : 'inactive'">
                                <div class="toggle-thumb"></div>
                            </div>
                        </div>
                        <div data-component="card" data-intent="default" data-variant="outline" data-size="auto" data-state="default" class="flex items-center justify-between p-4 bg-slate-50 rounded-lg">
                            <div>
                                <p class="text-sm font-medium text-slate-900">사이드바 기본 접힘</p>
                                <p class="text-xs text-slate-500 mt-0.5">로그인 시 사이드바를 접힌 상태로 표시</p>
                            </div>
                            <div @click="display.sidebarCollapsed = !display.sidebarCollapsed"
                                 class="toggle-track"
                                 :class="display.sidebarCollapsed ? 'active' : 'inactive'">
                                <div class="toggle-thumb"></div>
                            </div>
                        </div>
                        <div data-component="card" data-intent="default" data-variant="outline" data-size="auto" data-state="default" class="flex items-center justify-between p-4 bg-slate-50 rounded-lg">
                            <div>
                                <p class="text-sm font-medium text-slate-900">애니메이션 축소</p>
                                <p class="text-xs text-slate-500 mt-0.5">모션 민감 사용자를 위한 애니메이션 최소화</p>
                            </div>
                            <div @click="display.animationReduced = !display.animationReduced"
                                 class="toggle-track"
                                 :class="display.animationReduced ? 'active' : 'inactive'">
                                <div class="toggle-thumb"></div>
                            </div>
                        </div>
                    </div>

                    <div class="flex justify-end gap-2 pt-4 border-t border-slate-100">
                        <button class="px-4 h-10 text-sm text-slate-600 border border-slate-200 rounded-md hover:bg-slate-50 transition-colors">기본값 복원</button>
                        <button class="px-4 h-10 text-sm border border-slate-200 rounded-md hover:bg-slate-50 transition-colors">미리보기</button>
                        <button class="px-4 h-10 text-sm bg-slate-900 text-white rounded-md hover:bg-slate-800 transition-colors">저장</button>
                    </div>
                </div>

            </div>
        </div>
    </main>
</div>

<script>
function settingsPage() {
    return {
        activeTab: '프로필',

        profile: {
            name: '김부장',
            email: 'kim.bujang@kbfg.com',
            department: 'IT 보안팀',
            jobTitle: '팀장',
            phone: '010-1234-5678',
            timezone: 'Asia/Seoul (KST, UTC+9)',
            isSso: false
        },

        security: {
            mfaEnabled: true,
            mfaEnforced: true,
            mfaMethod: 'TOTP (인증 앱)',
            currentPw: '',
            newPw: '',
            confirmPw: '',
            sessionTimeout: '30분',
            sessions: [
                { id:'s1', device:'Chrome · macOS (현재)', icon:'monitor', ip:'10.20.30.100', location:'서울', lastActive:'방금 전', current:true },
                { id:'s2', device:'Safari · iPhone 15', icon:'smartphone', ip:'10.20.30.145', location:'서울', lastActive:'2시간 전', current:false },
                { id:'s3', device:'Chrome · Windows 11', icon:'monitor', ip:'10.20.31.55', location:'서울', lastActive:'1일 전', current:false },
            ]
        },

        notif: {
            channels: [
                { key:'email', label:'이메일 알림', desc:'주요 알림을 이메일로 수신', icon:'mail', enabled:true },
                { key:'slack', label:'Slack 알림', desc:'#genOS-alerts 채널로 알림 수신', icon:'message-square', enabled:true },
                { key:'sms', label:'SMS 알림', desc:'CRITICAL 등급 알림에 권장', icon:'smartphone', enabled:false },
                { key:'teams', label:'Microsoft Teams 알림', desc:'Teams 채널로 알림 수신', icon:'message-circle', enabled:false },
            ],
            severities: [
                { key:'CRITICAL', enabled:true, activeClass:'border-red-200 bg-red-50 text-red-700' },
                { key:'HIGH', enabled:true, activeClass:'border-orange-200 bg-orange-50 text-orange-700' },
                { key:'MEDIUM', enabled:true, activeClass:'border-amber-200 bg-amber-50 text-amber-700' },
                { key:'LOW', enabled:false, activeClass:'border-blue-200 bg-blue-50 text-blue-700' },
                { key:'INFO', enabled:false, activeClass:'border-slate-300 bg-slate-100 text-slate-700' },
            ],
            quietEnabled: false,
            quietStart: '22:00',
            quietEnd: '08:00',
            digestFreq: '실시간 (개별 발송)'
        },

        display: {
            theme: '시스템 설정 따르기',
            fontSize: '보통 (14px)',
            density: '보통 (Default)',
            language: '한국어',
            dateFormat: 'YYYY-MM-DD',
            numberFormat: '1,234.56 (한국/미국)',
            highContrast: false,
            sidebarCollapsed: false,
            animationReduced: false
        },

        get pwStrength() {
            const pw = this.security.newPw;
            if (!pw) return 0;
            let score = 0;
            if (pw.length >= 12) score++;
            if (/[A-Z]/.test(pw)) score++;
            if (/[0-9]/.test(pw)) score++;
            if (/[^A-Za-z0-9]/.test(pw)) score++;
            return score;
        },

        get pwStrengthColor() {
            const colors = ['','bg-red-500','bg-orange-500','bg-amber-500','bg-emerald-500'];
            return colors[this.pwStrength] || 'bg-slate-200';
        },

        get pwStrengthTextColor() {
            const colors = ['','text-red-600','text-orange-600','text-amber-600','text-emerald-600'];
            return colors[this.pwStrength] || 'text-slate-400';
        },

        get pwStrengthLabel() {
            const labels = ['','매우 약함','약함','보통','강함'];
            return labels[this.pwStrength] || '';
        },

        init() {
            lucide.createIcons();
            this.$nextTick(() => lucide.createIcons());
        }
    };
}
</script>

</body>
</html>
