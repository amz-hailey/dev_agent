<!DOCTYPE html>
<html lang="ko" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GenOS — 벤치마킹 대시보드</title>
    <link rel="stylesheet" href="../cdn/tailwind.css">
    <script defer src="../cdn/alpine.js"></script>
    <script src="../cdn/lucide.js"></script>
    <script src="../cdn/chart.js"></script>

    <style>
        .scrollbar-thin::-webkit-scrollbar { width: 4px; }
        .scrollbar-thin::-webkit-scrollbar-track { background: transparent; }
        .scrollbar-thin::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 2px; }
        .scrollbar-thin::-webkit-scrollbar-thumb:hover { background: #cbd5e1; }
        @keyframes slideDown { from{opacity:0;transform:translateY(-8px)} to{opacity:1;transform:translateY(0)} }
        .slide-down { animation: slideDown 0.25s ease-out; }
        @keyframes pulse-dot { 0%,100%{opacity:1} 50%{opacity:0.4} }
        .pulse-dot { animation: pulse-dot 2s ease-in-out infinite; }
    </style>
</head>
<body class="h-full bg-slate-50 font-sans antialiased">

<div x-data="benchmarking()" x-init="init()" class="flex h-full min-h-screen">

    <!-- ==================== SIDEBAR ==================== -->
    <aside class="w-[240px] bg-white border-r border-slate-200 flex flex-col flex-shrink-0 h-screen sticky top-0">
        <div class="h-16 flex items-center gap-2.5 px-5 border-b border-slate-100">
            <div class="w-8 h-8 rounded-lg bg-slate-900 flex items-center justify-center">
                <i data-lucide="shield-check" class="w-5 h-5 text-white"></i>
            </div>
            <span class="text-lg font-bold text-slate-900 tracking-tight">GenOS</span>
        </div>
        <nav class="flex-1 overflow-y-auto scrollbar-thin py-4 px-3">
            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5">보안 운영</p>
            <a href="../PG-02_dashboard.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="layout-dashboard" class="w-4 h-4"></i> 메인 대시보드</a>
            <a href="../PG-06_realtime_monitoring.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="activity" class="w-4 h-4"></i> 실시간 모니터링</a>
            <a href="../PG-07_alert_management.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="bell" class="w-4 h-4"></i> 알림 관리
                <span data-component="badge" class="ml-auto text-[11px] bg-red-100 text-red-700 font-medium px-1.5 py-0.5 rounded-full">3</span></a>

            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">에이전트 관리</p>
            <a href="../PG-03_agent_templates.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="boxes" class="w-4 h-4"></i> 템플릿 라이브러리</a>
            <a href="../PG-04_deploy_wizard.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="rocket" class="w-4 h-4"></i> 배포 위저드</a>
            <a href="../PG-05_connector_hub.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="plug" class="w-4 h-4"></i> 커넥터 허브</a>

            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">자동화</p>
            <a href="../PG-13_workflow_builder.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="git-branch" class="w-4 h-4"></i> 워크플로우 빌더</a>

            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">리포팅 · 감사</p>
            <a href="../PG-08_compliance_reports.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="file-text" class="w-4 h-4"></i> 컴플라이언스 리포트</a>
            <a href="../PG-09_audit_log.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="scroll-text" class="w-4 h-4"></i> 감사 로그</a>

            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">시스템 관리</p>
            <a href="../PG-10_user_permissions.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="users" class="w-4 h-4"></i> 사용자/권한</a>
            <a href="../PG-11_system_dr.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="server" class="w-4 h-4"></i> 시스템/DR</a>
            <a href="../PG-12_settings.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="settings" class="w-4 h-4"></i> 설정</a>

            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">고도화</p>
            <a href="../PG-15_ai_pipeline.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="brain-circuit" class="w-4 h-4"></i> AI 재학습 파이프라인</a>

            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">내부 관리</p>
            <a href="../PG-14_customer_health.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="heart-pulse" class="w-4 h-4"></i> 고객 Health</a>
            <a href="../PG-16_benchmarking.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm font-medium bg-slate-100 text-slate-900 mb-0.5">
                <i data-lucide="bar-chart-horizontal" class="w-4 h-4"></i> 벤치마킹</a>
        </nav>
        <div class="border-t border-slate-100 p-3">
            <div class="flex items-center gap-2.5 px-2 py-1.5">
                <div class="w-8 h-8 rounded-full bg-violet-100 flex items-center justify-center text-xs font-bold text-violet-600">박</div>
                <div class="flex-1 min-w-0">
                    <p class="text-sm font-medium text-slate-900 truncate">박CSM</p>
                    <p class="text-[11px] text-slate-400 truncate">고객 성공팀</p>
                </div>
                <button class="text-slate-400 hover:text-slate-600 transition-colors"><i data-lucide="log-out" class="w-4 h-4"></i></button>
            </div>
        </div>
    </aside>

    <!-- ==================== MAIN ==================== -->
    <main class="flex-1 flex flex-col min-w-0">

        <!-- Header -->
        <header class="h-16 bg-white border-b border-slate-200 flex items-center justify-between px-6 flex-shrink-0">
            <div>
                <h1 class="text-lg font-bold text-slate-900">벤치마킹 대시보드</h1>
                <p class="text-xs text-slate-400 -mt-0.5">멀티 금융사 성능 비교 · 업종별 벤치마크 · 추이 분석</p>
            </div>
            <div class="flex items-center gap-3">
                <div data-component="badge" class="flex items-center gap-1.5 text-xs text-blue-600 bg-blue-50 px-2.5 py-1 rounded-full">
                    <i data-lucide="lock" class="w-3 h-3"></i> 익명화 적용
                </div>
                <span class="text-xs text-slate-400" x-text="'기준: ' + reportDate"></span>
                <button class="h-8 px-3 rounded-md border border-slate-200 text-xs font-medium text-slate-600 hover:bg-slate-50 transition-colors inline-flex items-center gap-1.5">
                    <i data-lucide="download" class="w-3.5 h-3.5"></i> 내보내기</button>
                <button class="h-8 px-3 rounded-md bg-slate-900 text-xs font-medium text-white hover:bg-slate-800 transition-colors inline-flex items-center gap-1.5">
                    <i data-lucide="file-text" class="w-3.5 h-3.5"></i> 벤치마크 리포트</button>
            </div>
        </header>

        <!-- Scrollable Content -->
        <div class="flex-1 overflow-y-auto p-6 space-y-5">

            <!-- ==================== CROSS-CUSTOMER METRICS TABLE ==================== -->
            <div data-component="card" class="bg-white rounded-xl border border-slate-200">
                <div class="flex items-center justify-between px-5 py-3 border-b border-slate-100">
                    <div class="flex items-center gap-3">
                        <h2 class="text-sm font-semibold text-slate-900">금융사 간 성능 비교</h2>
                        <span data-component="badge" class="text-[11px] bg-slate-100 text-slate-500 px-2 py-0.5 rounded-full" x-text="filteredCompanies.length + '개 금융사'"></span>
                        <span data-component="badge" class="text-[10px] bg-amber-50 text-amber-600 px-2 py-0.5 rounded-full inline-flex items-center gap-1">
                            <i data-lucide="eye-off" class="w-3 h-3"></i> 사명 익명처리</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <!-- Industry Filter -->
                        <div data-component="tab" class="flex items-center gap-1 bg-slate-100 rounded-lg p-0.5">
                            <template x-for="f in industryFilters" :key="f.value">
                                <button @click="industryFilter=f.value"
                                        class="px-2.5 py-1 text-[11px] font-medium rounded-md transition-colors"
                                        :class="industryFilter===f.value ? 'bg-white text-slate-900 shadow-sm' : 'text-slate-500 hover:text-slate-700'"
                                        x-text="f.label"></button>
                            </template>
                        </div>
                        <div class="relative">
                            <i data-lucide="search" class="absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-400"></i>
                            <input x-model="searchQuery" type="text" placeholder="검색..."
                                   class="h-8 w-36 pl-8 pr-3 text-xs bg-slate-50 border border-slate-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-300">
                        </div>
                    </div>
                </div>

                <div class="overflow-x-auto">
                    <table class="w-full text-xs">
                        <thead>
                            <tr class="text-left text-slate-400 font-medium border-b border-slate-100 bg-slate-50/50">
                                <th class="py-2.5 px-5 w-[120px]">금융사</th>
                                <th class="py-2.5 px-3 w-[70px]">업종</th>
                                <th class="py-2.5 px-3 w-[70px]">규모</th>
                                <th class="py-2.5 px-3 w-[80px] cursor-pointer hover:text-slate-600" @click="sortCompanies('detectionRate')">
                                    <span class="inline-flex items-center gap-1">탐지율 <i data-lucide="arrow-up-down" class="w-3 h-3"></i></span></th>
                                <th class="py-2.5 px-3 w-[80px] cursor-pointer hover:text-slate-600" @click="sortCompanies('falsePositive')">
                                    <span class="inline-flex items-center gap-1">오탐률 <i data-lucide="arrow-up-down" class="w-3 h-3"></i></span></th>
                                <th class="py-2.5 px-3 w-[80px]">응답시간</th>
                                <th class="py-2.5 px-3 w-[80px]">가동률</th>
                                <th class="py-2.5 px-3 w-[80px]">규제준수</th>
                                <th class="py-2.5 px-3 w-[80px]">에이전트</th>
                                <th class="py-2.5 px-3 w-[90px]">일일 처리량</th>
                                <th class="py-2.5 px-3 w-[60px]">등급</th>
                            </tr>
                        </thead>
                        <tbody>
                            <template x-for="c in filteredCompanies" :key="c.id">
                                <tr class="border-b border-slate-50 transition-colors cursor-pointer"
                                    :class="selectedCompany===c.id ? 'bg-blue-50/50' : 'hover:bg-slate-50'"
                                    @click="selectedCompany=c.id">
                                    <td class="py-2.5 px-5 font-medium text-slate-800" x-text="c.alias"></td>
                                    <td class="py-2.5 px-3">
                                        <span data-component="badge" class="text-[10px] font-medium px-1.5 py-0.5 rounded-full"
                                              :class="{'bg-blue-100 text-blue-700': c.industry==='은행', 'bg-indigo-100 text-indigo-700': c.industry==='증권', 'bg-amber-100 text-amber-700': c.industry==='보험', 'bg-rose-100 text-rose-700': c.industry==='카드'}"
                                              x-text="c.industry"></span></td>
                                    <td class="py-2.5 px-3 text-slate-500" x-text="c.scale"></td>
                                    <td class="py-2.5 px-3 font-mono" :class="c.detectionRate >= 95 ? 'text-emerald-600 font-medium' : c.detectionRate >= 90 ? 'text-slate-700' : 'text-red-600'" x-text="c.detectionRate.toFixed(1)+'%'"></td>
                                    <td class="py-2.5 px-3 font-mono" :class="c.falsePositive <= 2 ? 'text-emerald-600' : c.falsePositive <= 5 ? 'text-slate-700' : 'text-red-600 font-medium'" x-text="c.falsePositive.toFixed(1)+'%'"></td>
                                    <td class="py-2.5 px-3 font-mono" :class="c.responseMs <= 50 ? 'text-emerald-600' : c.responseMs <= 100 ? 'text-slate-700' : 'text-red-600'" x-text="c.responseMs + 'ms'"></td>
                                    <td class="py-2.5 px-3 font-mono" :class="c.uptime >= 99.95 ? 'text-emerald-600' : c.uptime >= 99.9 ? 'text-slate-700' : 'text-red-600'" x-text="c.uptime.toFixed(2)+'%'"></td>
                                    <td class="py-2.5 px-3">
                                        <div class="flex items-center gap-1.5">
                                            <div class="w-full h-1.5 bg-slate-100 rounded-full overflow-hidden max-w-[50px]">
                                                <div class="h-full rounded-full" :class="c.compliance >= 95 ? 'bg-emerald-500' : c.compliance >= 85 ? 'bg-amber-500' : 'bg-red-500'" :style="'width:'+c.compliance+'%'"></div>
                                            </div>
                                            <span class="text-slate-600" x-text="c.compliance+'%'"></span>
                                        </div></td>
                                    <td class="py-2.5 px-3 text-slate-600 text-center" x-text="c.agents"></td>
                                    <td class="py-2.5 px-3 text-slate-600" x-text="c.dailyVolume"></td>
                                    <td class="py-2.5 px-3">
                                        <span data-component="badge" class="text-[10px] font-bold px-1.5 py-0.5 rounded-full"
                                              :class="{
                                                  'bg-emerald-100 text-emerald-700': c.grade==='A+' || c.grade==='A',
                                                  'bg-blue-100 text-blue-700': c.grade==='B+' || c.grade==='B',
                                                  'bg-amber-100 text-amber-700': c.grade==='C+' || c.grade==='C',
                                                  'bg-red-100 text-red-700': c.grade==='D'
                                              }"
                                              x-text="c.grade"></span></td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- ==================== CHARTS ROW ==================== -->
            <div class="grid grid-cols-2 gap-5">

                <!-- Industry Benchmarks (Bar Chart) -->
                <div data-component="card" class="bg-white rounded-xl border border-slate-200 p-5">
                    <div class="flex items-center justify-between mb-4">
                        <div>
                            <h2 class="text-sm font-semibold text-slate-900">업종별 벤치마크</h2>
                            <p class="text-[11px] text-slate-400 mt-0.5">업종 평균 vs 전체 평균</p>
                        </div>
                        <!-- Metric Tabs -->
                        <div data-component="tab" class="flex items-center gap-1 bg-slate-100 rounded-lg p-0.5">
                            <template x-for="tab in metricTabs" :key="tab.value">
                                <button @click="benchmarkMetric=tab.value; renderBenchmarkChart()"
                                        class="px-2.5 py-1 text-[11px] font-medium rounded-md transition-colors"
                                        :class="benchmarkMetric===tab.value ? 'bg-white text-slate-900 shadow-sm' : 'text-slate-500 hover:text-slate-700'"
                                        x-text="tab.label"></button>
                            </template>
                        </div>
                    </div>
                    <div class="h-[280px]">
                        <canvas id="benchmarkChart"></canvas>
                    </div>
                </div>

                <!-- Trend Analysis (Line Chart) -->
                <div data-component="card" class="bg-white rounded-xl border border-slate-200 p-5">
                    <div class="flex items-center justify-between mb-4">
                        <div>
                            <h2 class="text-sm font-semibold text-slate-900">추이 분석</h2>
                            <p class="text-[11px] text-slate-400 mt-0.5">최근 12개월 업종별 평균</p>
                        </div>
                        <div class="flex items-center gap-3 text-[11px]">
                            <span class="inline-flex items-center gap-1"><span class="w-3 h-0.5 bg-blue-500 rounded"></span> 은행</span>
                            <span class="inline-flex items-center gap-1"><span class="w-3 h-0.5 bg-indigo-500 rounded"></span> 증권</span>
                            <span class="inline-flex items-center gap-1"><span class="w-3 h-0.5 bg-amber-500 rounded"></span> 보험</span>
                            <span class="inline-flex items-center gap-1"><span class="w-3 h-0.5 bg-rose-500 rounded"></span> 카드</span>
                        </div>
                    </div>
                    <div class="h-[280px]">
                        <canvas id="trendChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>

<script>
document.addEventListener('alpine:init', () => { setTimeout(() => lucide.createIcons(), 50); });

function benchmarking() {
    return {
        selectedCompany: null,
        searchQuery: '',
        industryFilter: '전체',
        benchmarkMetric: 'detection',
        benchmarkChart: null,
        trendChartInstance: null,
        reportDate: '2026-02-07',

        industryFilters: [
            { value:'전체', label:'전체' },
            { value:'은행', label:'은행' },
            { value:'증권', label:'증권' },
            { value:'보험', label:'보험' },
            { value:'카드', label:'카드' }
        ],

        metricTabs: [
            { value:'detection', label:'탐지율' },
            { value:'falsePositive', label:'오탐률' },
            { value:'response', label:'응답시간' },
            { value:'uptime', label:'가동률' },
            { value:'compliance', label:'규제준수' }
        ],

        companies: [
            { id:'a', alias:'Company A', industry:'은행', scale:'대형', detectionRate:96.8, falsePositive:1.8, responseMs:32, uptime:99.97, compliance:98, agents:12, dailyVolume:'45.2K', grade:'A+' },
            { id:'b', alias:'Company B', industry:'은행', scale:'대형', detectionRate:93.5, falsePositive:3.2, responseMs:45, uptime:99.95, compliance:95, agents:10, dailyVolume:'38.7K', grade:'A' },
            { id:'c', alias:'Company C', industry:'은행', scale:'중형', detectionRate:88.1, falsePositive:6.5, responseMs:78, uptime:99.82, compliance:88, agents:8, dailyVolume:'22.3K', grade:'B' },
            { id:'d', alias:'Company D', industry:'증권', scale:'대형', detectionRate:95.0, falsePositive:2.1, responseMs:38, uptime:99.96, compliance:97, agents:6, dailyVolume:'18.9K', grade:'A' },
            { id:'e', alias:'Company E', industry:'증권', scale:'중형', detectionRate:82.3, falsePositive:8.7, responseMs:112, uptime:99.71, compliance:82, agents:4, dailyVolume:'8.5K', grade:'C+' },
            { id:'f', alias:'Company F', industry:'보험', scale:'대형', detectionRate:91.8, falsePositive:3.8, responseMs:55, uptime:99.93, compliance:94, agents:7, dailyVolume:'15.2K', grade:'B+' },
            { id:'g', alias:'Company G', industry:'카드', scale:'대형', detectionRate:97.1, falsePositive:1.5, responseMs:28, uptime:99.98, compliance:99, agents:9, dailyVolume:'52.1K', grade:'A+' },
            { id:'h', alias:'Company H', industry:'카드', scale:'중형', detectionRate:89.5, falsePositive:4.2, responseMs:65, uptime:99.88, compliance:91, agents:5, dailyVolume:'12.8K', grade:'B+' }
        ],

        // Industry benchmark averages for bar chart
        industryBenchmarks: {
            detection:      { '은행': 92.8, '증권': 88.7, '보험': 91.8, '카드': 93.3, '전체평균': 91.6 },
            falsePositive:  { '은행': 3.8,  '증권': 5.4,  '보험': 3.8,  '카드': 2.9,  '전체평균': 3.9 },
            response:       { '은행': 52,   '증권': 75,   '보험': 55,   '카드': 47,   '전체평균': 57 },
            uptime:         { '은행': 99.91,'증권': 99.84,'보험': 99.93,'카드': 99.93,'전체평균': 99.90 },
            compliance:     { '은행': 93.7, '증권': 89.5, '보험': 94.0, '카드': 95.0, '전체평균': 93.1 }
        },

        // Monthly trend data (12 months) for line chart
        trendData: {
            labels: ['3월','4월','5월','6월','7월','8월','9월','10월','11월','12월','1월','2월'],
            '은행':   [89.2, 90.1, 90.5, 91.0, 91.3, 91.8, 92.0, 92.3, 92.5, 92.6, 92.7, 92.8],
            '증권':   [83.5, 84.2, 84.8, 85.5, 86.1, 86.8, 87.2, 87.8, 88.0, 88.2, 88.5, 88.7],
            '보험':   [87.0, 87.5, 88.2, 88.8, 89.3, 89.8, 90.2, 90.6, 91.0, 91.2, 91.5, 91.8],
            '카드':   [88.5, 89.2, 89.8, 90.3, 90.8, 91.2, 91.8, 92.2, 92.5, 92.8, 93.0, 93.3]
        },

        get filteredCompanies() {
            let list = this.companies;
            if (this.industryFilter !== '전체') list = list.filter(c => c.industry === this.industryFilter);
            if (this.searchQuery) {
                const q = this.searchQuery.toLowerCase();
                list = list.filter(c => c.alias.toLowerCase().includes(q) || c.industry.includes(q));
            }
            return list;
        },

        sortCompanies(field) {
            this.companies.sort((a, b) => b[field] - a[field]);
        },

        renderBenchmarkChart() {
            const el = document.getElementById('benchmarkChart');
            if (!el) return;
            if (this.benchmarkChart) { this.benchmarkChart.destroy(); this.benchmarkChart = null; }
            const ctx = el.getContext('2d');
            if (!ctx) return;

            const metric = this.benchmarkMetric;
            const data = this.industryBenchmarks[metric];
            const industries = ['은행', '증권', '보험', '카드'];
            const avg = data['전체평균'];

            const metricConfig = {
                detection:     { label: '탐지율 (%)', min: 80, max: 100, suffix: '%' },
                falsePositive: { label: '오탐률 (%)', min: 0, max: 12, suffix: '%' },
                response:      { label: '응답시간 (ms)', min: 0, max: 120, suffix: 'ms' },
                uptime:        { label: '가동률 (%)', min: 99.5, max: 100, suffix: '%' },
                compliance:    { label: '규제준수 (%)', min: 80, max: 100, suffix: '%' }
            };

            const cfg = metricConfig[metric];

            this.benchmarkChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: industries,
                    datasets: [
                        {
                            label: '업종 평균',
                            data: industries.map(i => data[i]),
                            backgroundColor: ['#3b82f6', '#6366f1', '#f59e0b', '#f43f5e'],
                            borderRadius: 4,
                            barPercentage: 0.6
                        },
                        {
                            label: '전체 평균',
                            data: industries.map(() => avg),
                            type: 'line',
                            borderColor: '#94a3b8',
                            borderWidth: 2,
                            borderDash: [6, 3],
                            pointRadius: 0,
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: false,
                    interaction: { mode: 'index', intersect: false },
                    plugins: {
                        legend: { position: 'bottom', labels: { font: { size: 11 }, usePointStyle: true, padding: 15 } },
                        tooltip: {
                            backgroundColor: '#1e293b', titleFont: { size: 11 }, bodyFont: { size: 11 },
                            padding: 8, cornerRadius: 6,
                            callbacks: { label: ctx => ctx.dataset.label + ': ' + (metric === 'uptime' ? ctx.parsed.y.toFixed(2) : ctx.parsed.y.toFixed(1)) + cfg.suffix }
                        }
                    },
                    scales: {
                        x: { grid: { display: false }, ticks: { font: { size: 11 }, color: '#64748b' } },
                        y: { min: cfg.min, max: cfg.max, grid: { color: '#f1f5f9' }, ticks: { font: { size: 10 }, color: '#94a3b8', callback: v => (metric === 'uptime' ? v.toFixed(2) : v) + cfg.suffix } }
                    }
                }
            });
        },

        renderTrendChart() {
            const el = document.getElementById('trendChart');
            if (!el) return;
            if (this.trendChartInstance) { this.trendChartInstance.destroy(); this.trendChartInstance = null; }
            const ctx = el.getContext('2d');
            if (!ctx) return;

            const colors = { '은행': '#3b82f6', '증권': '#6366f1', '보험': '#f59e0b', '카드': '#f43f5e' };

            this.trendChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: this.trendData.labels,
                    datasets: ['은행', '증권', '보험', '카드'].map(industry => ({
                        label: industry,
                        data: this.trendData[industry],
                        borderColor: colors[industry],
                        backgroundColor: colors[industry] + '10',
                        borderWidth: 2,
                        tension: 0.3,
                        fill: false,
                        pointRadius: 2,
                        pointHoverRadius: 5
                    }))
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: false,
                    interaction: { mode: 'index', intersect: false },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: '#1e293b', titleFont: { size: 11 }, bodyFont: { size: 11 },
                            padding: 8, cornerRadius: 6,
                            callbacks: { label: ctx => ctx.dataset.label + ': ' + ctx.parsed.y.toFixed(1) + '%' }
                        }
                    },
                    scales: {
                        x: { grid: { display: false }, ticks: { font: { size: 10 }, color: '#94a3b8' } },
                        y: { min: 80, max: 100, grid: { color: '#f1f5f9' }, ticks: { font: { size: 10 }, color: '#94a3b8', callback: v => v + '%' } }
                    }
                }
            });
        },

        init() {
            this.$nextTick(() => {
                try { lucide.createIcons(); } catch(e) { console.warn('Lucide init:', e); }
                try { this.renderBenchmarkChart(); } catch(e) { console.warn('Benchmark chart init:', e); }
                try { this.renderTrendChart(); } catch(e) { console.warn('Trend chart init:', e); }
            });
        }
    };
}
</script>
</body>
</html>
