<!DOCTYPE html>
<html lang="ko" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GenOS — 에이전트 템플릿 라이브러리</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css">
    <script>
        tailwind.config = { theme: { extend: { fontFamily: { sans: ['Pretendard Variable','Inter','system-ui','-apple-system','sans-serif'] } } } }
    </script>
    <style>
        .scrollbar-thin::-webkit-scrollbar{width:4px}.scrollbar-thin::-webkit-scrollbar-track{background:transparent}.scrollbar-thin::-webkit-scrollbar-thumb{background:#e2e8f0;border-radius:2px}
        @keyframes slideInRight{from{opacity:0;transform:translateX(100%)}to{opacity:1;transform:translateX(0)}}
        @keyframes slideOutRight{from{opacity:1;transform:translateX(0)}to{opacity:0;transform:translateX(100%)}}
        .panel-enter{animation:slideInRight .25s ease-out forwards}
        .panel-leave{animation:slideOutRight .2s ease-in forwards}
    </style>
</head>
<body class="h-full bg-slate-50 font-sans antialiased">

<div x-data="templateLib()" x-init="init()" class="flex h-full min-h-screen">

    <!-- ===== SIDEBAR (same pattern) ===== -->
    <aside class="w-[240px] bg-white border-r border-slate-200 flex flex-col flex-shrink-0 h-screen sticky top-0">
        <div class="h-16 flex items-center gap-2.5 px-5 border-b border-slate-100">
            <div class="w-8 h-8 rounded-lg bg-slate-900 flex items-center justify-center"><i data-lucide="shield-check" class="w-5 h-5 text-white"></i></div>
            <span class="text-lg font-bold text-slate-900 tracking-tight">GenOS</span>
        </div>
        <nav class="flex-1 overflow-y-auto scrollbar-thin py-4 px-3">
            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5">보안 운영</p>
            <a href="PG-02_dashboard.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="layout-dashboard" class="w-4 h-4"></i>메인 대시보드</a>
            <a href="PG-06_realtime_monitoring.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="activity" class="w-4 h-4"></i>실시간 모니터링</a>
            <a href="PG-07_alert_management.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="bell" class="w-4 h-4"></i>알림 관리</a>
            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">에이전트 관리</p>
            <a href="PG-03_agent_templates.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm font-medium bg-slate-100 text-slate-900 mb-0.5"><i data-lucide="boxes" class="w-4 h-4"></i>템플릿 라이브러리</a>
            <a href="PG-04_deploy_wizard.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="rocket" class="w-4 h-4"></i>배포 위저드</a>
            <a href="PG-05_connector_hub.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="plug" class="w-4 h-4"></i>커넥터 허브</a>
            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">리포팅 · 감사</p>
            <a href="PG-08_compliance_reports.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="file-text" class="w-4 h-4"></i>컴플라이언스 리포트</a>
            <a href="PG-09_audit_log.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="scroll-text" class="w-4 h-4"></i>감사 로그</a>
            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">시스템 관리</p>
            <a href="PG-10_user_permissions.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="users" class="w-4 h-4"></i>사용자/권한</a>
            <a href="PG-11_system_dr.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="server" class="w-4 h-4"></i>시스템/DR</a>
            <a href="PG-12_settings.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="settings" class="w-4 h-4"></i>설정</a>
        </nav>
        <div class="border-t border-slate-100 p-3">
            <div class="flex items-center gap-2.5 px-2 py-1.5">
                <div class="w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-xs font-bold text-slate-600">김</div>
                <div class="flex-1 min-w-0"><p class="text-sm font-medium text-slate-900 truncate">김부장</p><p class="text-[11px] text-slate-400">IT 보안팀</p></div>
                <button class="text-slate-400 hover:text-slate-600"><i data-lucide="log-out" class="w-4 h-4"></i></button>
            </div>
        </div>
    </aside>

    <!-- ===== MAIN ===== -->
    <main class="flex-1 flex flex-col min-w-0">
        <!-- Top bar -->
        <header class="h-16 bg-white border-b border-slate-200 flex items-center justify-between px-6 flex-shrink-0">
            <div>
                <h1 class="text-lg font-bold text-slate-900">에이전트 템플릿 라이브러리</h1>
                <p class="text-xs text-slate-400 -mt-0.5">금융 보안 특화 사전 구축 에이전트 템플릿</p>
            </div>
            <div class="flex items-center gap-2">
                <span class="text-xs text-slate-400" x-text="filteredTemplates.length + '개 템플릿'"></span>
            </div>
        </header>

        <div class="flex-1 overflow-y-auto p-6">

            <!-- ===== CATEGORY FILTER ===== -->
            <div class="bg-white rounded-xl border border-slate-200 p-4 mb-6" aria-label="에이전트 템플릿 필터">
                <div class="flex items-center gap-3 flex-wrap">
                    <!-- Category -->
                    <div class="flex-shrink-0">
                        <label class="text-[11px] font-medium text-slate-500 mb-1 block">카테고리</label>
                        <select x-model="filterCategory"
                                class="h-9 rounded-md border border-slate-200 bg-white px-3 text-sm text-slate-700 focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1 transition-all">
                            <option value="전체">전체</option>
                            <option value="이상거래 탐지 (FDS)">이상거래 탐지 (FDS)</option>
                            <option value="자금세탁 방지 (AML)">자금세탁 방지 (AML)</option>
                            <option value="내부 정보 유출">내부 정보 유출</option>
                            <option value="접근 권한 이상">접근 권한 이상</option>
                        </select>
                    </div>
                    <!-- Status -->
                    <div class="flex-shrink-0">
                        <label class="text-[11px] font-medium text-slate-500 mb-1 block">상태</label>
                        <select x-model="filterStatus"
                                class="h-9 rounded-md border border-slate-200 bg-white px-3 text-sm text-slate-700 focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1 transition-all">
                            <option value="전체">전체</option>
                            <option value="사용 가능">사용 가능</option>
                            <option value="베타">베타</option>
                            <option value="준비 중">준비 중</option>
                        </select>
                    </div>
                    <!-- Sort -->
                    <div class="flex-shrink-0">
                        <label class="text-[11px] font-medium text-slate-500 mb-1 block">정렬</label>
                        <select x-model="filterSort"
                                class="h-9 rounded-md border border-slate-200 bg-white px-3 text-sm text-slate-700 focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1 transition-all">
                            <option value="인기순">인기순</option>
                            <option value="최신순">최신순</option>
                            <option value="이름순">이름순</option>
                        </select>
                    </div>
                    <!-- Search -->
                    <div class="flex-1 min-w-[200px]">
                        <label class="text-[11px] font-medium text-slate-500 mb-1 block">검색</label>
                        <div class="relative">
                            <i data-lucide="search" class="w-4 h-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2"></i>
                            <input type="text" x-model="filterSearch" placeholder="템플릿 이름 또는 키워드 검색"
                                   class="h-9 w-full rounded-md border border-slate-200 bg-white pl-9 pr-3 text-sm placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1 transition-all">
                        </div>
                    </div>
                    <!-- Reset -->
                    <div class="flex-shrink-0 self-end">
                        <button @click="resetFilters" class="h-9 px-3 rounded-md border border-slate-200 text-xs font-medium text-slate-500 hover:bg-slate-50 hover:text-slate-700 transition-colors">
                            초기화
                        </button>
                    </div>
                </div>
            </div>

            <!-- ===== TEMPLATE GRID ===== -->
            <div class="grid grid-cols-3 gap-4" aria-label="에이전트 템플릿 목록">
                <template x-for="tpl in filteredTemplates" :key="tpl.id">
                    <div @click="openDetail(tpl)"
                         class="bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md hover:border-slate-300 transition-all duration-200 cursor-pointer group flex flex-col">
                        <!-- Header -->
                        <div class="flex items-start gap-3 mb-3">
                            <div class="w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0"
                                 :class="tpl.iconBg">
                                <i :data-lucide="tpl.icon" class="w-5 h-5" :class="tpl.iconColor"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <h3 class="text-sm font-semibold text-slate-900 group-hover:text-slate-700 transition-colors" x-text="tpl.name"></h3>
                                <div class="flex items-center gap-1.5 mt-1">
                                    <span class="text-[10px] font-medium px-1.5 py-0.5 rounded-full"
                                          :class="categoryBadge(tpl.category)" x-text="tpl.categoryShort"></span>
                                    <span class="text-[10px] font-medium px-1.5 py-0.5 rounded-full"
                                          :class="statusBadge(tpl.status)" x-text="tpl.status"></span>
                                </div>
                            </div>
                        </div>
                        <!-- Description -->
                        <p class="text-xs text-slate-500 leading-relaxed mb-3 flex-1" x-text="tpl.description"></p>
                        <!-- Model badge -->
                        <div x-show="tpl.model" class="flex items-center gap-1.5 mb-3">
                            <i data-lucide="brain" class="w-3 h-3 text-purple-500"></i>
                            <span class="text-[11px] text-purple-700 font-medium" x-text="tpl.model"></span>
                            <span x-show="tpl.autoConnect" class="text-[10px] bg-purple-50 text-purple-600 px-1.5 py-0.5 rounded-full">자동연결</span>
                        </div>
                        <!-- Tags -->
                        <div class="flex flex-wrap gap-1 mb-3">
                            <template x-for="tag in tpl.tags.slice(0,3)" :key="tag">
                                <span class="text-[10px] bg-slate-100 text-slate-500 px-1.5 py-0.5 rounded" x-text="tag"></span>
                            </template>
                        </div>
                        <!-- Footer -->
                        <div class="flex items-center justify-between pt-3 border-t border-slate-100">
                            <div class="flex items-center gap-1">
                                <template x-for="s in 5" :key="s">
                                    <svg class="w-3 h-3" :class="s <= tpl.rating ? 'text-amber-400' : 'text-slate-200'" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                                </template>
                                <span class="text-[11px] text-slate-400 ml-1" x-text="'(' + tpl.deployCount + ')'"></span>
                            </div>
                            <span class="text-[11px] text-slate-400" x-text="tpl.setupTime"></span>
                        </div>
                        <!-- Actions -->
                        <div class="flex gap-2 mt-3">
                            <button @click.stop="openDetail(tpl)"
                                    class="flex-1 h-8 rounded-md border border-slate-200 text-xs font-medium text-slate-600 hover:bg-slate-50 transition-colors">
                                상세 보기
                            </button>
                            <a :href="'PG-04_deploy_wizard.html?template=' + tpl.id" @click.stop
                               class="flex-1 h-8 rounded-md bg-slate-900 text-xs font-medium text-white hover:bg-slate-800 transition-colors flex items-center justify-center">
                                배포 시작
                            </a>
                        </div>
                    </div>
                </template>
            </div>

            <!-- Empty state -->
            <div x-show="filteredTemplates.length === 0" class="text-center py-16">
                <div class="w-14 h-14 rounded-xl bg-slate-100 flex items-center justify-center mx-auto mb-4">
                    <i data-lucide="search-x" class="w-7 h-7 text-slate-400"></i>
                </div>
                <p class="text-sm font-medium text-slate-600">해당 조건에 맞는 템플릿이 없습니다</p>
                <p class="text-xs text-slate-400 mt-1">필터를 변경하거나 검색어를 확인해주세요</p>
                <button @click="resetFilters" class="mt-4 h-9 px-4 rounded-md bg-slate-900 text-xs font-medium text-white hover:bg-slate-800 transition-colors">필터 초기화</button>
            </div>
        </div>
    </main>

    <!-- ===== DETAIL PANEL (slide-over) ===== -->
    <div x-show="detailOpen" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
         x-transition:leave="transition ease-in duration-150" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0"
         class="fixed inset-0 z-40" style="display:none;">
        <!-- Backdrop -->
        <div class="absolute inset-0 bg-black/20" @click="closeDetail"></div>
        <!-- Panel -->
        <div class="absolute right-0 top-0 h-full w-[480px] bg-white shadow-xl border-l border-slate-200 flex flex-col panel-enter"
             @keydown.escape.window="closeDetail"
             aria-label="에이전트 템플릿 상세 정보 패널">

            <!-- Panel header -->
            <div class="h-16 flex items-center justify-between px-6 border-b border-slate-100 flex-shrink-0">
                <h2 class="text-base font-bold text-slate-900">템플릿 상세</h2>
                <button @click="closeDetail" class="p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-md transition-colors" aria-label="닫기">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>

            <!-- Panel body -->
            <div class="flex-1 overflow-y-auto scrollbar-thin p-6 space-y-6" x-show="selectedTemplate">

                <!-- Overview -->
                <div>
                    <div class="flex items-start gap-3 mb-4">
                        <div class="w-12 h-12 rounded-lg flex items-center justify-center" :class="selectedTemplate?.iconBg">
                            <i :data-lucide="selectedTemplate?.icon" class="w-6 h-6" :class="selectedTemplate?.iconColor"></i>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold text-slate-900" x-text="selectedTemplate?.name"></h3>
                            <div class="flex items-center gap-2 mt-1">
                                <span class="text-[10px] font-medium px-1.5 py-0.5 rounded-full" :class="categoryBadge(selectedTemplate?.category)" x-text="selectedTemplate?.categoryShort"></span>
                                <span class="text-xs text-slate-400" x-text="'v' + selectedTemplate?.version"></span>
                            </div>
                        </div>
                    </div>
                    <p class="text-sm text-slate-600 leading-relaxed" x-text="selectedTemplate?.fullDescription"></p>
                </div>

                <!-- Setup info -->
                <div class="grid grid-cols-2 gap-3">
                    <div class="rounded-lg bg-slate-50 p-3">
                        <p class="text-[11px] text-slate-400 mb-0.5">예상 설정 시간</p>
                        <p class="text-sm font-semibold text-slate-900" x-text="selectedTemplate?.setupTime"></p>
                    </div>
                    <div class="rounded-lg bg-slate-50 p-3">
                        <p class="text-[11px] text-slate-400 mb-0.5">배포 횟수</p>
                        <p class="text-sm font-semibold text-slate-900" x-text="selectedTemplate?.deployCount + '회'"></p>
                    </div>
                </div>

                <!-- Features -->
                <div>
                    <h4 class="text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2">주요 기능</h4>
                    <ul class="space-y-1.5">
                        <template x-for="feat in selectedTemplate?.features || []" :key="feat">
                            <li class="flex items-start gap-2 text-sm text-slate-700">
                                <i data-lucide="check" class="w-4 h-4 text-emerald-500 flex-shrink-0 mt-0.5"></i>
                                <span x-text="feat"></span>
                            </li>
                        </template>
                    </ul>
                </div>

                <!-- Model info -->
                <div x-show="selectedTemplate?.model">
                    <h4 class="text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2">사전 학습 모델</h4>
                    <div class="rounded-lg border border-purple-100 bg-purple-50/50 p-4 space-y-2">
                        <div class="flex items-center justify-between">
                            <span class="text-sm font-medium text-slate-900" x-text="selectedTemplate?.model"></span>
                            <span x-show="selectedTemplate?.autoConnect" class="text-[10px] bg-purple-100 text-purple-700 font-medium px-2 py-0.5 rounded-full">자동 연결</span>
                        </div>
                        <div class="grid grid-cols-2 gap-2 text-xs">
                            <div><span class="text-slate-400">정확도: </span><span class="font-medium text-slate-700" x-text="selectedTemplate?.modelAccuracy + '%'"></span></div>
                            <div><span class="text-slate-400">최종 업데이트: </span><span class="font-medium text-slate-700" x-text="selectedTemplate?.modelUpdated"></span></div>
                        </div>
                    </div>
                </div>

                <!-- Requirements -->
                <div>
                    <h4 class="text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2">필수 요구사항</h4>
                    <div class="space-y-2">
                        <div>
                            <p class="text-[11px] text-slate-400 mb-1">필요 데이터 소스</p>
                            <div class="flex flex-wrap gap-1">
                                <template x-for="ds in selectedTemplate?.dataSources || []" :key="ds">
                                    <span class="text-[11px] bg-blue-50 text-blue-700 px-2 py-0.5 rounded-full" x-text="ds"></span>
                                </template>
                            </div>
                        </div>
                        <div>
                            <p class="text-[11px] text-slate-400 mb-1">지원 DB</p>
                            <div class="flex flex-wrap gap-1">
                                <template x-for="db in selectedTemplate?.databases || []" :key="db">
                                    <span class="text-[11px] bg-slate-100 text-slate-600 px-2 py-0.5 rounded-full" x-text="db"></span>
                                </template>
                            </div>
                        </div>
                        <div x-show="selectedTemplate?.minDataVolume">
                            <p class="text-[11px] text-slate-400 mb-1">최소 데이터량</p>
                            <p class="text-sm text-slate-700" x-text="selectedTemplate?.minDataVolume"></p>
                        </div>
                    </div>
                </div>

                <!-- Usage stats -->
                <div>
                    <h4 class="text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2">사용 통계</h4>
                    <div class="grid grid-cols-3 gap-3">
                        <div class="text-center rounded-lg bg-slate-50 p-3">
                            <p class="text-lg font-bold text-slate-900" x-text="selectedTemplate?.deployCount"></p>
                            <p class="text-[11px] text-slate-400">배포</p>
                        </div>
                        <div class="text-center rounded-lg bg-slate-50 p-3">
                            <p class="text-lg font-bold text-emerald-600" x-text="selectedTemplate?.avgDetection + '%'"></p>
                            <p class="text-[11px] text-slate-400">평균 탐지율</p>
                        </div>
                        <div class="text-center rounded-lg bg-slate-50 p-3">
                            <p class="text-lg font-bold text-amber-600" x-text="selectedTemplate?.avgFPR + '%'"></p>
                            <p class="text-[11px] text-slate-400">평균 오탐률</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Panel footer -->
            <div class="border-t border-slate-100 p-4 flex gap-2 flex-shrink-0">
                <button @click="closeDetail" class="flex-1 h-10 rounded-md border border-slate-200 text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors">닫기</button>
                <a :href="'PG-04_deploy_wizard.html?template=' + selectedTemplate?.id"
                   class="flex-1 h-10 rounded-md bg-slate-900 text-sm font-medium text-white hover:bg-slate-800 transition-colors flex items-center justify-center gap-1.5">
                    <i data-lucide="rocket" class="w-4 h-4"></i> 이 템플릿으로 배포
                </a>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('alpine:init', () => { setTimeout(() => lucide.createIcons(), 50); });
const _obs = new MutationObserver(() => lucide.createIcons());
_obs.observe(document.body, { childList: true, subtree: true });

function templateLib() {
    return {
        /* Filters */
        filterCategory: '전체',
        filterStatus: '전체',
        filterSort: '인기순',
        filterSearch: '',

        /* Detail panel */
        detailOpen: true,
        selectedTemplate: null,

        /* Templates data */
        templates: [
            {
                id: 'fds-realtime', name: 'FDS 실시간 이상거래 탐지', categoryShort: 'FDS', category: '이상거래 탐지 (FDS)',
                description: '실시간 금융 거래 데이터를 분석하여 이상거래 패턴을 즉시 감지. 딥러닝 기반 비지도 학습 모델 내장.',
                fullDescription: '실시간 금융 거래 스트림을 분석하여 비정상 거래 패턴을 자동으로 감지합니다. Autoencoder 기반 비지도 학습 모델이 내장되어 있어 신규 공격 패턴에도 적응합니다. 거래 금액, 빈도, 시간대, 수취인 패턴 등 200+ 피처를 실시간으로 분석합니다.',
                icon: 'zap', iconBg: 'bg-red-100', iconColor: 'text-red-600',
                status: '사용 가능', rating: 5, deployCount: 847, setupTime: '약 30분', version: '3.2.2',
                model: 'FDS-Autoencoder-v3', autoConnect: true, modelAccuracy: 97.8, modelUpdated: '2026-01-28',
                tags: ['실시간', '딥러닝', '비지도학습', '카드거래'],
                features: ['실시간 거래 스트림 분석 (< 100ms 레이턴시)', '200+ 피처 자동 추출', 'Autoencoder 기반 이상 점수 산출', '적응형 임계값 자동 조정', '거래 차단 API 연동'],
                dataSources: ['실시간 거래 API', '계좌 정보 DB', '고객 프로필 DB'],
                databases: ['Oracle', 'PostgreSQL', 'MySQL'], minDataVolume: '최소 100만 건 거래 이력',
                avgDetection: 97.8, avgFPR: 3.2
            },
            {
                id: 'aml-monitoring', name: 'AML 자금세탁 모니터링', categoryShort: 'AML', category: '자금세탁 방지 (AML)',
                description: '자금세탁 의심 거래를 탐지하고 구조화 거래, 해외 송금 패턴, 고위험 국가 거래를 실시간 분석.',
                fullDescription: 'FATF 권고사항 및 금융보안원 AML 가이드라인에 기반한 자금세탁 의심 거래 탐지 에이전트입니다. 구조화 거래(structuring), 해외 송금 패턴, 고위험 국가 거래, PEP 거래를 종합적으로 분석합니다.',
                icon: 'scan-eye', iconBg: 'bg-orange-100', iconColor: 'text-orange-600',
                status: '사용 가능', rating: 5, deployCount: 623, setupTime: '약 45분', version: '2.8.1',
                model: 'AML-GraphNet-v2', autoConnect: true, modelAccuracy: 96.4, modelUpdated: '2026-02-01',
                tags: ['자금세탁', 'FATF', '그래프분석', '송금'],
                features: ['구조화 거래(Structuring) 패턴 탐지', '해외 송금 네트워크 그래프 분석', 'PEP(정치적 주요인물) 거래 모니터링', 'STR(의심거래보고) 자동 생성', '고위험 국가 목록 자동 업데이트'],
                dataSources: ['송금 거래 API', '해외 송금 DB', 'FATF 고위험 국가 목록'],
                databases: ['Oracle', 'PostgreSQL', 'MongoDB'], minDataVolume: '최소 50만 건 송금 이력',
                avgDetection: 96.4, avgFPR: 4.8
            },
            {
                id: 'dlp-detection', name: '내부 정보 유출 탐지 (DLP)', categoryShort: 'DLP', category: '내부 정보 유출',
                description: '직원의 비정상적 데이터 접근·다운로드 패턴을 감지. UEBA 기반 행위 프로파일링.',
                fullDescription: 'User Entity Behavior Analytics(UEBA) 기반으로 직원의 정상 행동 패턴을 학습하고, 비정상적인 대량 데이터 접근, 이상 시간대 접속, 비인가 데이터 다운로드 등을 감지합니다.',
                icon: 'eye', iconBg: 'bg-purple-100', iconColor: 'text-purple-600',
                status: '사용 가능', rating: 4, deployCount: 412, setupTime: '약 60분', version: '2.1.0',
                model: 'UEBA-Transformer-v1', autoConnect: true, modelAccuracy: 94.2, modelUpdated: '2026-01-15',
                tags: ['UEBA', '행위분석', 'DLP', '내부자위협'],
                features: ['사용자 행동 베이스라인 자동 학습', '대량 데이터 접근/다운로드 감지', '이상 시간대(심야/휴일) 접근 알림', '퇴직 예정자 모니터링 강화 모드', '스크린캡처/USB 복사 감지'],
                dataSources: ['접근 로그 DB', 'DLP 시스템 API', 'HR 시스템'],
                databases: ['PostgreSQL', 'Elasticsearch'], minDataVolume: '최소 3개월 접근 로그',
                avgDetection: 94.2, avgFPR: 5.1
            },
            {
                id: 'access-anomaly', name: '접근 권한 이상 탐지', categoryShort: '접근이상', category: '접근 권한 이상',
                description: '비인가 접근 시도, 권한 에스컬레이션, 비정상 IP 접근 등 인증/인가 이상 패턴 탐지.',
                fullDescription: '제로 트러스트 보안 원칙에 기반하여 모든 인증/인가 이벤트를 모니터링합니다. 비인가 IP 접근, 이상 지역 로그인, 권한 에스컬레이션, Brute Force 공격 등을 실시간으로 탐지합니다.',
                icon: 'shield-alert', iconBg: 'bg-blue-100', iconColor: 'text-blue-600',
                status: '사용 가능', rating: 4, deployCount: 538, setupTime: '약 25분', version: '3.0.4',
                model: null, autoConnect: false, modelAccuracy: null, modelUpdated: null,
                tags: ['제로트러스트', 'IAM', '인증', 'Brute Force'],
                features: ['비인가 IP/위치 접근 실시간 차단', 'Brute Force 공격 자동 감지·차단', '권한 에스컬레이션 시도 알림', 'Impossible Travel 탐지', '다중 디바이스 동시 접근 감지'],
                dataSources: ['IAM 로그', 'VPN 로그', 'SSO 이벤트 스트림'],
                databases: ['PostgreSQL', 'Elasticsearch', 'Redis'], minDataVolume: '최소 1개월 인증 로그',
                avgDetection: 98.1, avgFPR: 2.4
            },
            {
                id: 'card-fraud', name: '카드 부정 사용 탐지', categoryShort: 'FDS', category: '이상거래 탐지 (FDS)',
                description: '도난/분실 카드, 위변조 카드, 비대면 카드 부정 사용을 실시간으로 탐지.',
                fullDescription: '신용카드 및 체크카드의 부정 사용 패턴을 실시간으로 분석합니다. 카드 분실/도난 후 비정상 사용, 온라인 결제 사기, 해외 결제 이상 패턴 등을 다층 모델로 탐지합니다.',
                icon: 'credit-card', iconBg: 'bg-red-100', iconColor: 'text-red-600',
                status: '사용 가능', rating: 4, deployCount: 312, setupTime: '약 40분', version: '2.5.3',
                model: 'CardFraud-LSTM-v2', autoConnect: true, modelAccuracy: 96.9, modelUpdated: '2026-01-20',
                tags: ['카드사기', 'LSTM', '비대면', '해외결제'],
                features: ['카드 사용 패턴 프로파일링', '비대면(CNP) 거래 위험 분석', '해외 결제 이상 패턴 감지', '도난/분실 즉시 차단 연동', 'POS 위변조 탐지'],
                dataSources: ['카드 거래 API', '가맹점 DB', 'VAN 네트워크'],
                databases: ['Oracle', 'PostgreSQL'], minDataVolume: '최소 200만 건 카드 거래',
                avgDetection: 96.9, avgFPR: 3.8
            },
            {
                id: 'structuring-detect', name: '구조화 거래 탐지', categoryShort: 'AML', category: '자금세탁 방지 (AML)',
                description: '보고 임계값 회피를 위한 의도적 거래 분할(Structuring) 패턴을 탐지.',
                fullDescription: '자금세탁 방지법상 보고 임계값(CTR/STR)을 회피하기 위한 의도적 거래 분할 패턴을 그래프 네트워크 분석으로 탐지합니다. 동일인 또는 관련인 간 분할 거래를 시간/금액/빈도 차원에서 분석합니다.',
                icon: 'git-branch', iconBg: 'bg-orange-100', iconColor: 'text-orange-600',
                status: '베타', rating: 4, deployCount: 89, setupTime: '약 35분', version: '1.2.0-beta',
                model: 'Structuring-GNN-v1', autoConnect: true, modelAccuracy: 92.1, modelUpdated: '2026-01-10',
                tags: ['구조화거래', 'CTR', 'GNN', '거래분할'],
                features: ['거래 분할 패턴 그래프 분석', 'CTR 임계값 근접 거래 감시', '관련인 네트워크 자동 매핑', '시계열 분할 패턴 탐지', '법적 보고서 자동 생성'],
                dataSources: ['입출금 거래 API', '고객 관계 DB'],
                databases: ['PostgreSQL', 'Neo4j'], minDataVolume: '최소 30만 건 입출금 거래',
                avgDetection: 92.1, avgFPR: 6.3
            },
            {
                id: 'atm-anomaly', name: 'ATM 비정상 인출 탐지', categoryShort: 'FDS', category: '이상거래 탐지 (FDS)',
                description: 'ATM 인출 이상 패턴 탐지 — 비정상 시간/장소, 다수 ATM 순회 인출 등.',
                fullDescription: 'ATM 현금 인출 거래에 특화된 이상 패턴 탐지 에이전트입니다. 비정상 시간대 인출, 지리적으로 불가능한 연속 인출, 다수 ATM 순회 인출, 일 한도 근접 반복 인출 등을 감지합니다.',
                icon: 'banknote', iconBg: 'bg-red-100', iconColor: 'text-red-600',
                status: '준비 중', rating: 3, deployCount: 0, setupTime: '약 30분', version: '0.9.0',
                model: null, autoConnect: false, modelAccuracy: null, modelUpdated: null,
                tags: ['ATM', '현금인출', '위치분석'],
                features: ['ATM 인출 시간/장소 패턴 분석', 'Impossible Travel 기반 인출 탐지', '다수 ATM 순회 인출 알림', '일 한도 근접 반복 인출 감시', '카드 스키밍 의심 탐지'],
                dataSources: ['ATM 거래 API', 'ATM 위치 DB'],
                databases: ['Oracle', 'PostgreSQL'], minDataVolume: '최소 50만 건 ATM 거래',
                avgDetection: 0, avgFPR: 0
            },
            {
                id: 'phishing-detect', name: '피싱/보이스피싱 탐지', categoryShort: 'FDS', category: '이상거래 탐지 (FDS)',
                description: '보이스피싱 의심 거래 패턴 탐지 — 고령층 대상, 급박한 대량 이체 등.',
                fullDescription: '보이스피싱 및 메신저 피싱 피해를 예방하기 위한 거래 패턴 분석 에이전트입니다. 피해자 프로파일(고령층, 거래 이력 변화), 급박한 대량 이체, 수취 계좌 위험도 등을 종합 분석합니다.',
                icon: 'phone-off', iconBg: 'bg-red-100', iconColor: 'text-red-600',
                status: '베타', rating: 4, deployCount: 156, setupTime: '약 35분', version: '1.5.0-beta',
                model: 'Phishing-Ensemble-v1', autoConnect: true, modelAccuracy: 93.5, modelUpdated: '2026-01-25',
                tags: ['보이스피싱', '피싱', '고령층', '사기방지'],
                features: ['피해자 프로파일 리스크 분석', '급박한 대량 이체 패턴 감지', '수취 계좌 위험도 실시간 조회', '고령층 대상 이상 거래 강화 감시', '지연 이체/거래 확인 트리거'],
                dataSources: ['이체 거래 API', '고객 프로필 DB', '사기 계좌 블랙리스트'],
                databases: ['PostgreSQL', 'Redis'], minDataVolume: '최소 30만 건 이체 거래',
                avgDetection: 93.5, avgFPR: 5.7
            },
            {
                id: 'account-takeover', name: '계좌 도용 탐지', categoryShort: '접근이상', category: '접근 권한 이상',
                description: '탈취된 자격증명을 이용한 계좌 도용 시도를 행동 분석 기반으로 탐지.',
                fullDescription: '자격증명 탈취(Credential Stuffing)를 통한 계좌 도용 시도를 탐지합니다. 로그인 패턴, 디바이스 핑거프린트, 행동 바이오메트릭스 등을 종합하여 정상 사용자 여부를 판별합니다.',
                icon: 'user-x', iconBg: 'bg-blue-100', iconColor: 'text-blue-600',
                status: '사용 가능', rating: 4, deployCount: 267, setupTime: '약 30분', version: '2.3.1',
                model: 'ATO-Behavioral-v2', autoConnect: true, modelAccuracy: 95.7, modelUpdated: '2026-01-30',
                tags: ['계좌도용', '행동분석', '바이오메트릭스', 'Credential Stuffing'],
                features: ['디바이스 핑거프린트 분석', '행동 바이오메트릭스 비교', '로그인 패턴 이상 탐지', 'Credential Stuffing 대량 공격 감지', '세션 하이재킹 탐지'],
                dataSources: ['인증 로그', '디바이스 데이터', '세션 DB'],
                databases: ['PostgreSQL', 'Redis', 'Elasticsearch'], minDataVolume: '최소 2개월 인증 로그',
                avgDetection: 95.7, avgFPR: 3.1
            },
        ],

        get filteredTemplates() {
            let result = [...this.templates];
            if (this.filterCategory !== '전체') result = result.filter(t => t.category === this.filterCategory);
            if (this.filterStatus !== '전체') result = result.filter(t => t.status === this.filterStatus);
            if (this.filterSearch.trim()) {
                const q = this.filterSearch.toLowerCase();
                result = result.filter(t => t.name.toLowerCase().includes(q) || t.description.toLowerCase().includes(q) || t.tags.some(tag => tag.toLowerCase().includes(q)));
            }
            if (this.filterSort === '인기순') result.sort((a,b) => b.deployCount - a.deployCount);
            else if (this.filterSort === '이름순') result.sort((a,b) => a.name.localeCompare(b.name, 'ko'));
            return result;
        },

        resetFilters() { this.filterCategory = '전체'; this.filterStatus = '전체'; this.filterSort = '인기순'; this.filterSearch = ''; },

        openDetail(tpl) {
            this.selectedTemplate = tpl;
            this.detailOpen = true;
            this.$nextTick(() => lucide.createIcons());
        },
        closeDetail() { this.detailOpen = false; },

        categoryBadge(cat) {
            const m = { '이상거래 탐지 (FDS)':'bg-red-50 text-red-700', '자금세탁 방지 (AML)':'bg-orange-50 text-orange-700', '내부 정보 유출':'bg-purple-50 text-purple-700', '접근 권한 이상':'bg-blue-50 text-blue-700' };
            return m[cat] || 'bg-slate-100 text-slate-600';
        },
        statusBadge(status) {
            const m = { '사용 가능':'bg-emerald-50 text-emerald-700', '베타':'bg-amber-50 text-amber-700', '준비 중':'bg-slate-100 text-slate-500' };
            return m[status] || 'bg-slate-100 text-slate-500';
        },

        init() {
            this.selectedTemplate = this.templates[0]; this.$nextTick(() => lucide.createIcons()); }
    };
}
</script>
</body>
</html>
