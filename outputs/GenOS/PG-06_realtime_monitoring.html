<!DOCTYPE html>
<html lang="ko" class="h-full">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GenOS — 실시간 모니터링 대시보드</title>
    <link rel="stylesheet" href="cdn/tailwind.css">
    <script defer src="cdn/alpine.js"></script>
    <script src="cdn/lucide.js"></script>
            
    <style>.scrollbar-thin::-webkit-scrollbar{width:4px}.scrollbar-thin::-webkit-scrollbar-thumb{background:#e2e8f0;border-radius:2px}@keyframes pulse-dot{0%,100%{opacity:1}50%{opacity:.4}}.pulse-dot{animation:pulse-dot 2s infinite}@keyframes slideDown{from{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:translateY(0)}}.slide-down{animation:slideDown .2s ease-out}</style>
</head>
<body class="h-full bg-slate-50 font-sans antialiased">
<div x-data="monitoring()" x-init="init()" class="flex h-full min-h-screen">
    <!-- SIDEBAR -->
    <aside class="w-[240px] bg-white border-r border-slate-200 flex flex-col flex-shrink-0 h-screen sticky top-0">
        <div class="h-16 flex items-center gap-2.5 px-5 border-b border-slate-100"><div class="w-8 h-8 rounded-lg bg-slate-900 flex items-center justify-center"><i data-lucide="shield-check" class="w-5 h-5 text-white"></i></div><span class="text-lg font-bold text-slate-900">GenOS</span></div>
        <nav class="flex-1 overflow-y-auto scrollbar-thin py-4 px-3">
            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5">보안 운영</p>
            <a href="PG-02_dashboard.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="layout-dashboard" class="w-4 h-4"></i>메인 대시보드</a>
            <a href="PG-06_realtime_monitoring.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm font-medium bg-slate-100 text-slate-900 mb-0.5"><i data-lucide="activity" class="w-4 h-4"></i>실시간 모니터링</a>
            <a href="PG-07_alert_management.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="bell" class="w-4 h-4"></i>알림 관리</a>
            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">에이전트 관리</p>
            <a href="PG-03_agent_templates.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="boxes" class="w-4 h-4"></i>템플릿 라이브러리</a>
            <a href="PG-04_deploy_wizard.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="rocket" class="w-4 h-4"></i>배포 위저드</a>
            <a href="PG-05_connector_hub.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="plug" class="w-4 h-4"></i>커넥터 허브</a>

            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">자동화</p>
            <a href="PG-13_workflow_builder.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="git-branch" class="w-4 h-4"></i> 워크플로우 빌더</a>

            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">리포팅 · 감사</p>
            <a href="PG-08_compliance_reports.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="file-text" class="w-4 h-4"></i>컴플라이언스 리포트</a>
            <a href="PG-09_audit_log.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="scroll-text" class="w-4 h-4"></i>감사 로그</a>
            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">시스템 관리</p>
            <a href="PG-10_user_permissions.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="users" class="w-4 h-4"></i>사용자/권한</a>
            <a href="PG-11_system_dr.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="server" class="w-4 h-4"></i>시스템/DR</a>
            <a href="PG-12_settings.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="settings" class="w-4 h-4"></i>설정</a>


            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">고도화</p>
            <a href="PG-15_ai_pipeline.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="brain-circuit" class="w-4 h-4"></i> AI 재학습 파이프라인</a>

            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">내부 관리</p>
            <a href="PG-14_customer_health.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="heart-pulse" class="w-4 h-4"></i> 고객 Health</a>
            <a href="PG-16_benchmarking.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors mb-0.5">
                <i data-lucide="bar-chart-horizontal" class="w-4 h-4"></i> 벤치마킹</a>

        </nav>
        <div class="border-t border-slate-100 p-3"><div class="flex items-center gap-2.5 px-2 py-1.5"><div class="w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-xs font-bold text-slate-600">김</div><div class="flex-1 min-w-0"><p class="text-sm font-medium text-slate-900 truncate">김부장</p><p class="text-[11px] text-slate-400">IT 보안팀</p></div></div></div>
    </aside>

    <main class="flex-1 flex flex-col min-w-0">
        <header class="h-16 bg-white border-b border-slate-200 flex items-center justify-between px-6 flex-shrink-0">
            <div><h1 class="text-lg font-bold text-slate-900">실시간 모니터링</h1><p class="text-xs text-slate-400 -mt-0.5">이상 탐지 스트리밍 모니터</p></div>
            <div class="flex items-center gap-3">
                <div class="flex items-center gap-1.5 text-xs px-2.5 py-1 rounded-full" :class="paused ? 'bg-amber-50 text-amber-600' : 'bg-emerald-50 text-emerald-600'">
                    <span class="w-1.5 h-1.5 rounded-full" :class="paused ? 'bg-amber-500' : 'bg-emerald-500 pulse-dot'"></span>
                    <span x-text="paused ? '일시 중지' : '실시간'"></span>
                </div>
                <button @click="paused=!paused" class="h-8 px-3 rounded-md border border-slate-200 text-xs font-medium text-slate-600 hover:bg-slate-50 transition-colors inline-flex items-center gap-1.5">
                    <i :data-lucide="paused ? 'play' : 'pause'" class="w-3.5 h-3.5"></i>
                    <span x-text="paused ? '재개' : '일시 중지'"></span>
                </button>
            </div>
        </header>

        <div class="flex-1 overflow-y-auto p-6">
            <div class="grid grid-cols-5 gap-4">
                <!-- LIVE ALERT FEED (left 3 cols) -->
                <div class="col-span-3 space-y-4">
                    <!-- Filters -->
                    <div class="flex items-center gap-2">
                        <template x-for="s in [{v:'all',l:'전체'},{v:'critical',l:'긴급'},{v:'high',l:'높음'},{v:'medium',l:'보통'},{v:'low',l:'낮음'}]" :key="s.v">
                            <button @click="sevFilter=s.v" class="px-2.5 py-1 text-[11px] font-medium rounded-full border transition-colors" :class="sevFilter===s.v ? 'bg-slate-900 text-white border-slate-900' : 'border-slate-200 text-slate-500 hover:border-slate-300'" x-text="s.l"></button>
                        </template>
                    </div>
                    <!-- Feed -->
                    <div class="bg-white rounded-xl border border-slate-200 divide-y divide-slate-100 max-h-[600px] overflow-y-auto scrollbar-thin">
                        <template x-for="a in filteredAlerts" :key="a.id">
                            <div class="p-4 hover:bg-slate-50 transition-colors cursor-pointer slide-down" @click="selectAlert(a)">
                                <div class="flex items-start gap-3">
                                    <span class="w-2 h-2 rounded-full mt-1.5 flex-shrink-0" :class="sevDot(a.severity)"></span>
                                    <div class="flex-1 min-w-0">
                                        <div class="flex items-center justify-between gap-2 mb-1">
                                            <div class="flex items-center gap-2">
                                                <span class="text-[10px] font-medium px-1.5 py-0.5 rounded-full" :class="sevBadge(a.severity)" x-text="a.severityLabel"></span>
                                                <span class="text-[10px] text-slate-400 font-mono" x-text="a.type"></span>
                                            </div>
                                            <span class="text-[11px] text-slate-400 font-mono" x-text="a.time"></span>
                                        </div>
                                        <p class="text-sm text-slate-800 leading-snug" x-text="a.message"></p>
                                        <div class="flex items-center gap-3 mt-1.5 text-[11px] text-slate-400">
                                            <span x-text="'TXN: ' + a.txId"></span>
                                            <span x-text="a.amount"></span>
                                            <span class="font-medium" :class="a.score >= 0.9 ? 'text-red-600' : a.score >= 0.7 ? 'text-amber-600' : 'text-blue-600'" x-text="'Score: ' + a.score.toFixed(2)"></span>
                                            <span x-text="'계좌: ' + a.account"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>

                <!-- RIGHT COLUMN (2 cols) -->
                <div class="col-span-2 space-y-4">
                    <!-- Detection Heatmap -->
                    <div class="bg-white rounded-xl border border-slate-200 p-5">
                        <div class="flex items-center justify-between mb-4">
                            <h2 class="text-sm font-semibold text-slate-900">탐지 히트맵</h2>
                            <div class="flex items-center gap-1 bg-slate-100 rounded-lg p-0.5">
                                <template x-for="p in [{v:'1d',l:'1일'},{v:'7d',l:'7일'},{v:'30d',l:'30일'}]" :key="p.v">
                                    <button @click="heatmapPeriod=p.v" class="px-2 py-0.5 text-[11px] font-medium rounded-md transition-colors" :class="heatmapPeriod===p.v ? 'bg-white text-slate-900 shadow-sm' : 'text-slate-500'" x-text="p.l"></button>
                                </template>
                            </div>
                        </div>
                        <!-- Heatmap grid -->
                        <div class="space-y-1">
                            <div class="flex items-center gap-1 text-[9px] text-slate-400 mb-1">
                                <div class="w-16"></div>
                                <template x-for="h in [0,3,6,9,12,15,18,21]" :key="h"><div class="flex-1 text-center" x-text="h + ':00'"></div></template>
                            </div>
                            <template x-for="row in heatmapData" :key="row.type">
                                <div class="flex items-center gap-1">
                                    <span class="w-16 text-[10px] text-slate-500 truncate" x-text="row.type"></span>
                                    <template x-for="(val, idx) in row.values" :key="idx">
                                        <div class="flex-1 h-5 rounded-sm" :class="heatColor(val)" :title="row.type + ' ' + idx + ':00 — ' + val + '건'"></div>
                                    </template>
                                </div>
                            </template>
                            <div class="flex items-center justify-end gap-2 mt-2">
                                <span class="text-[9px] text-slate-400">적음</span>
                                <div class="flex gap-0.5"><div class="w-3 h-3 rounded-sm bg-emerald-100"></div><div class="w-3 h-3 rounded-sm bg-emerald-300"></div><div class="w-3 h-3 rounded-sm bg-amber-400"></div><div class="w-3 h-3 rounded-sm bg-orange-500"></div><div class="w-3 h-3 rounded-sm bg-red-600"></div></div>
                                <span class="text-[9px] text-slate-400">많음</span>
                            </div>
                        </div>
                    </div>

                    <!-- Action Panel -->
                    <div x-show="selectedAlert" x-transition class="bg-white rounded-xl border border-slate-200 p-5">
                        <h2 class="text-sm font-semibold text-slate-900 mb-3">알림 상세</h2>
                        <div class="space-y-2 text-xs mb-4">
                            <div class="flex justify-between"><span class="text-slate-400">거래 ID</span><span class="font-mono text-slate-700" x-text="selectedAlert?.txId"></span></div>
                            <div class="flex justify-between"><span class="text-slate-400">시각</span><span class="text-slate-700" x-text="selectedAlert?.time"></span></div>
                            <div class="flex justify-between"><span class="text-slate-400">금액</span><span class="text-slate-700 font-medium" x-text="selectedAlert?.amount"></span></div>
                            <div class="flex justify-between"><span class="text-slate-400">계좌</span><span class="font-mono text-slate-700" x-text="selectedAlert?.account"></span></div>
                            <div class="flex justify-between"><span class="text-slate-400">탐지 유형</span><span class="text-slate-700" x-text="selectedAlert?.type"></span></div>
                            <div class="flex justify-between"><span class="text-slate-400">신뢰도</span><span class="font-bold" :class="selectedAlert?.score >= 0.9 ? 'text-red-600' : 'text-amber-600'" x-text="(selectedAlert?.score * 100).toFixed(0) + '%'"></span></div>
                            <div class="flex justify-between"><span class="text-slate-400">위험 요인</span><span class="text-slate-700" x-text="selectedAlert?.riskFactors"></span></div>
                        </div>
                        <div class="grid grid-cols-2 gap-2">
                            <button class="h-9 rounded-md bg-slate-900 text-xs font-medium text-white hover:bg-slate-800 transition-colors">확인 처리</button>
                            <button class="h-9 rounded-md border border-slate-200 text-xs font-medium text-slate-600 hover:bg-slate-50 transition-colors">담당자 배정</button>
                            <button class="h-9 rounded-md border border-amber-200 bg-amber-50 text-xs font-medium text-amber-700 hover:bg-amber-100 transition-colors">오탐 처리</button>
                            <button class="h-9 rounded-md border border-red-200 bg-red-50 text-xs font-medium text-red-700 hover:bg-red-100 transition-colors">에스컬레이션</button>
                        </div>
                    </div>

                    <!-- Placeholder when no alert selected -->
                    <div x-show="!selectedAlert" class="bg-white rounded-xl border border-slate-200 p-8 text-center">
                        <i data-lucide="mouse-pointer-click" class="w-8 h-8 text-slate-300 mx-auto mb-2"></i>
                        <p class="text-sm text-slate-400">알림을 클릭하면 상세 정보가 표시됩니다</p>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>
<script>
document.addEventListener('alpine:init',()=>{setTimeout(()=>lucide.createIcons(),50)});
function monitoring(){
    return {
        paused:false, sevFilter:'all', heatmapPeriod:'1d', selectedAlert:null,
        alerts:[
            {id:1,severity:'critical',severityLabel:'긴급',type:'FDS 이상거래',time:'14:32:07',message:'비정상 거래 패턴 — 30분간 동일 계좌 15회 이체 시도 (총 2.4억원)',txId:'TXN-88471',amount:'₩240,000,000',score:0.94,account:'110-***-4821',riskFactors:'단시간 다수 이체, 대액, 야간'},
            {id:2,severity:'high',severityLabel:'높음',type:'AML 자금세탁',time:'14:28:41',message:'고위험 거래 의심 — 해외 송금 3건 연속 (총 5.8억원, 동남아)',txId:'TXN-88302',amount:'₩580,000,000',score:0.91,account:'302-***-7134',riskFactors:'해외 연속 송금, 고위험국'},
            {id:3,severity:'critical',severityLabel:'긴급',type:'접근 이상',time:'14:22:15',message:'비인가 IP(103.42.xx.xx)에서 관리자 계정 접근 시도 3회',txId:'N/A',amount:'N/A',score:0.97,account:'admin_sys01',riskFactors:'비인가 IP, 관리자 계정, 반복 시도'},
            {id:4,severity:'medium',severityLabel:'보통',type:'FDS 이상거래',time:'14:15:33',message:'야간 시간대 비정상 대량 조회 — 계좌 잔액 조회 847건',txId:'TXN-87650',amount:'N/A',score:0.72,account:'emp_****2847',riskFactors:'야간 대량 조회, 정상 패턴 이탈'},
            {id:5,severity:'high',severityLabel:'높음',type:'DLP 정보유출',time:'14:08:19',message:'대량 고객정보 다운로드 감지 — 직원 ID: emp_3847 (12,400건)',txId:'N/A',amount:'N/A',score:0.88,account:'emp_****3847',riskFactors:'대량 다운로드, 퇴직 예정자'},
            {id:6,severity:'low',severityLabel:'낮음',type:'FDS 이상거래',time:'13:55:02',message:'소액 다건 이체 패턴 — 10분간 500~1,000원 이체 23건',txId:'TXN-87201',amount:'₩12,500',score:0.45,account:'540-***-2193',riskFactors:'다건 소액 이체'},
            {id:7,severity:'medium',severityLabel:'보통',type:'AML 구조화',time:'13:41:55',message:'구조화 거래 의심 — 입금 분산 (4개 계좌, 각 9.9백만원)',txId:'TXN-86940',amount:'₩39,600,000',score:0.76,account:'다수 계좌',riskFactors:'CTR 임계값 근접 분할'},
            {id:8,severity:'high',severityLabel:'높음',type:'카드 부정사용',time:'13:30:18',message:'해외 카드 결제 이상 — 동시간대 2개국 결제 (한국·필리핀)',txId:'TXN-86701',amount:'₩4,830,000',score:0.89,account:'4577-****-8823',riskFactors:'Impossible Travel, 해외 결제'},
            {id:9,severity:'low',severityLabel:'낮음',type:'접근 이상',time:'13:15:44',message:'비정상 시간대(03:42) VPN 접속 — 직원 ID: sec_admin02',txId:'N/A',amount:'N/A',score:0.38,account:'sec_****02',riskFactors:'심야 접속'},
            {id:10,severity:'medium',severityLabel:'보통',type:'FDS 이상거래',time:'13:02:11',message:'비대면 카드 결제 이상 — 배송지 변경 후 고가 결제 (720만원)',txId:'TXN-86490',amount:'₩7,200,000',score:0.68,account:'4577-****-1209',riskFactors:'배송지 변경, 고가 결제'},
        ],
        get filteredAlerts(){
            if(this.sevFilter==='all') return this.alerts;
            return this.alerts.filter(a=>a.severity===this.sevFilter);
        },
        selectAlert(a){this.selectedAlert=a;this.$nextTick(()=>lucide.createIcons())},
        sevDot(s){return{critical:'bg-red-500',high:'bg-orange-500',medium:'bg-amber-500',low:'bg-blue-500'}[s]||'bg-slate-400'},
        sevBadge(s){return{critical:'bg-red-100 text-red-700',high:'bg-orange-100 text-orange-700',medium:'bg-amber-100 text-amber-700',low:'bg-blue-100 text-blue-700'}[s]||'bg-slate-100 text-slate-500'},
        heatmapData:[
            {type:'FDS',values:[2,1,0,1,3,8,12,18,24,22,19,28,31,27,25,21,17,14,9,7,5,4,3,2]},
            {type:'AML',values:[0,0,0,0,1,2,4,6,8,7,9,11,13,10,8,7,5,4,3,2,1,1,0,0]},
            {type:'DLP',values:[0,0,1,0,0,1,2,5,7,6,4,3,5,4,3,2,3,4,6,3,1,0,0,0]},
            {type:'접근이상',values:[3,2,1,2,1,1,2,4,5,3,2,3,4,3,2,2,1,2,3,4,5,4,3,3]},
            {type:'카드',values:[1,0,0,0,1,2,3,5,7,9,11,13,15,12,10,8,7,9,11,8,5,3,2,1]},
        ],
        heatColor(v){
            if(v===0)return'bg-slate-100';if(v<=3)return'bg-emerald-100';if(v<=8)return'bg-emerald-300';if(v<=15)return'bg-amber-400';if(v<=25)return'bg-orange-500';return'bg-red-600';
        },
        init(){this.$nextTick(()=>lucide.createIcons())}
    }
}
</script>
</body>
</html>
