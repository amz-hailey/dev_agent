<!DOCTYPE html>
<html lang="ko" class="h-full">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GenOS — 데이터 소스 커넥터 허브</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css">
    <script>tailwind.config={theme:{extend:{fontFamily:{sans:['Pretendard Variable','Inter','system-ui','sans-serif']}}}}</script>
    <style>.scrollbar-thin::-webkit-scrollbar{width:4px}.scrollbar-thin::-webkit-scrollbar-thumb{background:#e2e8f0;border-radius:2px}@keyframes pulse-ring{0%,100%{box-shadow:0 0 0 0 rgba(16,185,129,0.3)}70%{box-shadow:0 0 0 6px rgba(16,185,129,0)}}.pulse-conn{animation:pulse-ring 2s infinite}</style>
</head>
<body class="h-full bg-slate-50 font-sans antialiased">
<div x-data="connectorHub()" x-init="init()" class="flex h-full min-h-screen">
    <!-- SIDEBAR -->
    <aside class="w-[240px] bg-white border-r border-slate-200 flex flex-col flex-shrink-0 h-screen sticky top-0">
        <div class="h-16 flex items-center gap-2.5 px-5 border-b border-slate-100"><div class="w-8 h-8 rounded-lg bg-slate-900 flex items-center justify-center"><i data-lucide="shield-check" class="w-5 h-5 text-white"></i></div><span class="text-lg font-bold text-slate-900">GenOS</span></div>
        <nav class="flex-1 overflow-y-auto scrollbar-thin py-4 px-3">
            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5">보안 운영</p>
            <a href="PG-02_dashboard.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="layout-dashboard" class="w-4 h-4"></i>메인 대시보드</a>
            <a href="PG-06_realtime_monitoring.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="activity" class="w-4 h-4"></i>실시간 모니터링</a>
            <a href="PG-07_alert_management.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="bell" class="w-4 h-4"></i>알림 관리</a>
            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">에이전트 관리</p>
            <a href="PG-03_agent_templates.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="boxes" class="w-4 h-4"></i>템플릿 라이브러리</a>
            <a href="PG-04_deploy_wizard.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="rocket" class="w-4 h-4"></i>배포 위저드</a>
            <a href="PG-05_connector_hub.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm font-medium bg-slate-100 text-slate-900 mb-0.5"><i data-lucide="plug" class="w-4 h-4"></i>커넥터 허브</a>
            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">리포팅 · 감사</p>
            <a href="PG-08_compliance_reports.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="file-text" class="w-4 h-4"></i>컴플라이언스 리포트</a>
            <a href="PG-09_audit_log.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="scroll-text" class="w-4 h-4"></i>감사 로그</a>
            <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider px-2 mb-1.5 mt-5">시스템 관리</p>
            <a href="PG-10_user_permissions.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="users" class="w-4 h-4"></i>사용자/권한</a>
            <a href="PG-11_system_dr.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="server" class="w-4 h-4"></i>시스템/DR</a>
            <a href="PG-12_settings.html" class="flex items-center gap-2.5 px-2.5 py-2 rounded-md text-sm text-slate-600 hover:bg-slate-50 mb-0.5"><i data-lucide="settings" class="w-4 h-4"></i>설정</a>
        </nav>
        <div class="border-t border-slate-100 p-3"><div class="flex items-center gap-2.5 px-2 py-1.5"><div class="w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-xs font-bold text-slate-600">김</div><div class="flex-1 min-w-0"><p class="text-sm font-medium text-slate-900 truncate">김부장</p><p class="text-[11px] text-slate-400">IT 보안팀</p></div></div></div>
    </aside>

    <main class="flex-1 flex flex-col min-w-0">
        <header class="h-16 bg-white border-b border-slate-200 flex items-center justify-between px-6 flex-shrink-0">
            <div><h1 class="text-lg font-bold text-slate-900">데이터 소스 커넥터 허브</h1><p class="text-xs text-slate-400 -mt-0.5">금융 DB/API 연결 통합 관리</p></div>
            <button @click="showAddModal = true" class="h-9 px-4 rounded-md bg-slate-900 text-sm font-medium text-white hover:bg-slate-800 transition-colors inline-flex items-center gap-1.5">
                <i data-lucide="plus" class="w-4 h-4"></i> 새 커넥터 추가
            </button>
        </header>

        <div class="flex-1 overflow-y-auto p-6">
            <!-- Connector Grid -->
            <div class="grid grid-cols-3 gap-4">
                <template x-for="conn in connectors" :key="conn.id">
                    <div class="bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md hover:border-slate-300 transition-all cursor-pointer" @click="selectConnector(conn)">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center gap-2.5">
                                <div class="w-9 h-9 rounded-lg flex items-center justify-center" :class="conn.iconBg">
                                    <i :data-lucide="conn.icon" class="w-5 h-5" :class="conn.iconColor"></i>
                                </div>
                                <div>
                                    <h3 class="text-sm font-semibold text-slate-900" x-text="conn.name"></h3>
                                    <span class="text-[10px] font-medium px-1.5 py-0.5 rounded-full" :class="conn.typeBadge" x-text="conn.type"></span>
                                </div>
                            </div>
                            <div class="flex items-center gap-1.5">
                                <span class="w-2 h-2 rounded-full" :class="conn.status === 'connected' ? 'bg-emerald-500 pulse-conn' : conn.status === 'error' ? 'bg-red-500' : 'bg-slate-300'"></span>
                                <span class="text-[11px] font-medium" :class="conn.status === 'connected' ? 'text-emerald-600' : conn.status === 'error' ? 'text-red-600' : 'text-slate-400'" x-text="conn.statusLabel"></span>
                            </div>
                        </div>
                        <div class="space-y-2 text-xs text-slate-500">
                            <div class="flex justify-between"><span>호스트</span><span class="text-slate-700 font-mono" x-text="conn.host"></span></div>
                            <div class="flex justify-between"><span>최종 테스트</span><span class="text-slate-700" x-text="conn.lastTest"></span></div>
                            <div class="flex justify-between"><span>PII 필드</span><span class="text-slate-700" x-text="conn.piiCount + '개 (마스킹 적용)'"></span></div>
                            <div class="flex justify-between"><span>스키마</span>
                                <span class="text-[10px] font-medium px-1.5 py-0.5 rounded-full" :class="conn.schemaStatus === '매핑 완료' ? 'bg-emerald-50 text-emerald-700' : 'bg-amber-50 text-amber-700'" x-text="conn.schemaStatus"></span>
                            </div>
                        </div>
                        <div class="flex gap-2 mt-4 pt-3 border-t border-slate-100">
                            <button @click.stop="testConn(conn)" class="flex-1 h-8 rounded-md border border-slate-200 text-xs font-medium text-slate-600 hover:bg-slate-50 transition-colors inline-flex items-center justify-center gap-1">
                                <i data-lucide="plug-zap" class="w-3 h-3"></i> 연결 테스트
                            </button>
                            <button @click.stop="selectConnector(conn)" class="flex-1 h-8 rounded-md border border-slate-200 text-xs font-medium text-slate-600 hover:bg-slate-50 transition-colors inline-flex items-center justify-center gap-1">
                                <i data-lucide="settings-2" class="w-3 h-3"></i> 상세
                            </button>
                        </div>
                    </div>
                </template>
            </div>
        </div>
    </main>

    <!-- Add Connector Modal -->
    <div x-show="showAddModal" x-transition class="fixed inset-0 z-50 flex items-center justify-center" style="display:none">
        <div class="absolute inset-0 bg-black/30" @click="showAddModal=false"></div>
        <div class="relative bg-white rounded-2xl shadow-2xl w-[560px] max-h-[80vh] overflow-y-auto p-6">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-base font-bold text-slate-900">새 커넥터 추가</h2>
                <button @click="showAddModal=false" class="p-1.5 text-slate-400 hover:text-slate-600 rounded-md"><i data-lucide="x" class="w-5 h-5"></i></button>
            </div>
            <div class="space-y-4">
                <div><label class="block text-sm font-medium text-slate-700 mb-1.5">커넥터 유형</label>
                    <div class="grid grid-cols-3 gap-2">
                        <template x-for="t in ['Oracle DB','PostgreSQL','MySQL','REST API','gRPC','Kafka']" :key="t">
                            <button @click="newConn.type=t" class="p-3 rounded-lg border text-center text-sm font-medium transition-all" :class="newConn.type===t ? 'border-slate-900 bg-slate-50 text-slate-900' : 'border-slate-200 text-slate-500 hover:border-slate-300'" x-text="t"></button>
                        </template>
                    </div>
                </div>
                <div><label class="block text-sm font-medium text-slate-700 mb-1.5">커넥터 이름</label><input type="text" x-model="newConn.name" placeholder="예: KB-FDS-Oracle" class="h-10 w-full rounded-md border border-slate-200 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1"></div>
                <div class="grid grid-cols-3 gap-3">
                    <div class="col-span-2"><label class="block text-sm font-medium text-slate-700 mb-1.5">호스트</label><input type="text" x-model="newConn.host" placeholder="db.example.com" class="h-10 w-full rounded-md border border-slate-200 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1"></div>
                    <div><label class="block text-sm font-medium text-slate-700 mb-1.5">포트</label><input type="number" x-model="newConn.port" placeholder="5432" class="h-10 w-full rounded-md border border-slate-200 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1"></div>
                </div>
                <div><label class="block text-sm font-medium text-slate-700 mb-1.5">데이터베이스</label><input type="text" x-model="newConn.db" class="h-10 w-full rounded-md border border-slate-200 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1"></div>
                <div class="grid grid-cols-2 gap-3">
                    <div><label class="block text-sm font-medium text-slate-700 mb-1.5">사용자명</label><input type="text" x-model="newConn.user" class="h-10 w-full rounded-md border border-slate-200 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1"></div>
                    <div><label class="block text-sm font-medium text-slate-700 mb-1.5">비밀번호</label><input type="password" x-model="newConn.pass" class="h-10 w-full rounded-md border border-slate-200 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-1"></div>
                </div>
            </div>
            <div class="flex gap-2 mt-6 pt-4 border-t border-slate-100">
                <button @click="showAddModal=false" class="flex-1 h-10 rounded-md border border-slate-200 text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors">취소</button>
                <button @click="addConnector" class="flex-1 h-10 rounded-md bg-slate-900 text-sm font-medium text-white hover:bg-slate-800 transition-colors">연결 테스트 및 추가</button>
            </div>
        </div>
    </div>

    <!-- Detail Side Panel -->
    <div x-show="selectedConn" x-transition class="fixed inset-0 z-40" style="display:none">
        <div class="absolute inset-0 bg-black/20" @click="selectedConn=null"></div>
        <div class="absolute right-0 top-0 h-full w-[420px] bg-white shadow-xl border-l border-slate-200 flex flex-col">
            <div class="h-16 flex items-center justify-between px-6 border-b border-slate-100 flex-shrink-0">
                <h2 class="text-base font-bold text-slate-900">커넥터 상세</h2>
                <button @click="selectedConn=null" class="p-1.5 text-slate-400 hover:text-slate-600 rounded-md"><i data-lucide="x" class="w-5 h-5"></i></button>
            </div>
            <div class="flex-1 overflow-y-auto scrollbar-thin p-6 space-y-5" x-show="selectedConn">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-lg flex items-center justify-center" :class="selectedConn?.iconBg"><i :data-lucide="selectedConn?.icon" class="w-5 h-5" :class="selectedConn?.iconColor"></i></div>
                    <div><h3 class="text-base font-bold text-slate-900" x-text="selectedConn?.name"></h3><span class="text-xs text-slate-400" x-text="selectedConn?.type"></span></div>
                </div>
                <div class="space-y-3">
                    <h4 class="text-xs font-semibold text-slate-400 uppercase tracking-wider">연결 상태</h4>
                    <div class="grid grid-cols-2 gap-3">
                        <div class="rounded-lg bg-slate-50 p-3"><p class="text-[11px] text-slate-400">상태</p><p class="text-sm font-semibold" :class="selectedConn?.status==='connected'?'text-emerald-600':'text-red-600'" x-text="selectedConn?.statusLabel"></p></div>
                        <div class="rounded-lg bg-slate-50 p-3"><p class="text-[11px] text-slate-400">레이턴시</p><p class="text-sm font-semibold text-slate-900" x-text="selectedConn?.latency + 'ms'"></p></div>
                        <div class="rounded-lg bg-slate-50 p-3"><p class="text-[11px] text-slate-400">Uptime</p><p class="text-sm font-semibold text-slate-900" x-text="selectedConn?.uptime + '%'"></p></div>
                        <div class="rounded-lg bg-slate-50 p-3"><p class="text-[11px] text-slate-400">TLS</p><p class="text-sm font-semibold text-slate-900">TLS 1.3</p></div>
                    </div>
                </div>
                <div class="space-y-3">
                    <h4 class="text-xs font-semibold text-slate-400 uppercase tracking-wider">스키마 정보</h4>
                    <div class="grid grid-cols-3 gap-3">
                        <div class="text-center rounded-lg bg-slate-50 p-3"><p class="text-lg font-bold text-slate-900" x-text="selectedConn?.tables"></p><p class="text-[11px] text-slate-400">테이블</p></div>
                        <div class="text-center rounded-lg bg-slate-50 p-3"><p class="text-lg font-bold text-slate-900" x-text="selectedConn?.mappedFields"></p><p class="text-[11px] text-slate-400">매핑 필드</p></div>
                        <div class="text-center rounded-lg bg-slate-50 p-3"><p class="text-lg font-bold text-purple-600" x-text="selectedConn?.piiCount"></p><p class="text-[11px] text-slate-400">PII 필드</p></div>
                    </div>
                </div>
                <div class="space-y-3">
                    <h4 class="text-xs font-semibold text-slate-400 uppercase tracking-wider">테스트 이력</h4>
                    <div class="space-y-2">
                        <template x-for="t in selectedConn?.testHistory || []" :key="t.time">
                            <div class="flex items-center justify-between text-xs p-2 rounded-md bg-slate-50">
                                <span class="text-slate-500" x-text="t.time"></span>
                                <span :class="t.ok ? 'text-emerald-600' : 'text-red-600'" x-text="t.ok ? '성공 (' + t.latency + 'ms)' : '실패'"></span>
                            </div>
                        </template>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
document.addEventListener('alpine:init',()=>{setTimeout(()=>lucide.createIcons(),50)});
const _o=new MutationObserver(()=>lucide.createIcons());_o.observe(document.body,{childList:true,subtree:true});
function connectorHub(){
    return {
        showAddModal:false, selectedConn:null,
        newConn:{type:'Oracle DB',name:'',host:'',port:'',db:'',user:'',pass:''},
        connectors:[
            {id:'c1',name:'KB-FDS-Oracle',type:'Oracle DB',icon:'database',iconBg:'bg-red-100',iconColor:'text-red-600',typeBadge:'bg-red-50 text-red-700',status:'connected',statusLabel:'연결됨',host:'fds-db.kb****.kr:1521',lastTest:'2분 전',piiCount:12,schemaStatus:'매핑 완료',latency:23,uptime:99.98,tables:47,mappedFields:186,testHistory:[{time:'14:30:07',ok:true,latency:23},{time:'14:00:07',ok:true,latency:21},{time:'13:30:07',ok:true,latency:25}]},
            {id:'c2',name:'SH-AML-PostgreSQL',type:'PostgreSQL',icon:'database',iconBg:'bg-blue-100',iconColor:'text-blue-600',typeBadge:'bg-blue-50 text-blue-700',status:'connected',statusLabel:'연결됨',host:'aml-db.shin****.kr:5432',lastTest:'5분 전',piiCount:8,schemaStatus:'매핑 완료',latency:15,uptime:99.99,tables:32,mappedFields:124,testHistory:[{time:'14:27:00',ok:true,latency:15},{time:'13:57:00',ok:true,latency:14},{time:'13:27:00',ok:true,latency:16}]},
            {id:'c3',name:'NH-DLP-API',type:'REST API',icon:'globe',iconBg:'bg-purple-100',iconColor:'text-purple-600',typeBadge:'bg-purple-50 text-purple-700',status:'connected',statusLabel:'연결됨',host:'api.nh****.co.kr/v2',lastTest:'10분 전',piiCount:5,schemaStatus:'매핑 완료',latency:89,uptime:99.95,tables:0,mappedFields:42,testHistory:[{time:'14:22:00',ok:true,latency:89},{time:'13:52:00',ok:true,latency:92},{time:'13:22:00',ok:false,latency:0}]},
            {id:'c4',name:'KB-Card-Oracle',type:'Oracle DB',icon:'database',iconBg:'bg-red-100',iconColor:'text-red-600',typeBadge:'bg-red-50 text-red-700',status:'connected',statusLabel:'연결됨',host:'card-db.kb****.kr:1521',lastTest:'3분 전',piiCount:15,schemaStatus:'매핑 완료',latency:28,uptime:99.97,tables:63,mappedFields:248,testHistory:[{time:'14:29:00',ok:true,latency:28},{time:'13:59:00',ok:true,latency:30}]},
            {id:'c5',name:'SH-Event-Kafka',type:'Kafka',icon:'radio',iconBg:'bg-orange-100',iconColor:'text-orange-600',typeBadge:'bg-orange-50 text-orange-700',status:'error',statusLabel:'연결 오류',host:'kafka.shin****.kr:9092',lastTest:'1시간 전',piiCount:3,schemaStatus:'확인 필요',latency:0,uptime:98.2,tables:0,mappedFields:18,testHistory:[{time:'13:32:00',ok:false,latency:0},{time:'13:02:00',ok:false,latency:0},{time:'12:32:00',ok:true,latency:45}]},
            {id:'c6',name:'NH-IAM-gRPC',type:'gRPC',icon:'key',iconBg:'bg-emerald-100',iconColor:'text-emerald-600',typeBadge:'bg-emerald-50 text-emerald-700',status:'connected',statusLabel:'연결됨',host:'iam.nh****.co.kr:443',lastTest:'7분 전',piiCount:6,schemaStatus:'매핑 완료',latency:12,uptime:99.99,tables:0,mappedFields:34,testHistory:[{time:'14:25:00',ok:true,latency:12},{time:'13:55:00',ok:true,latency:11}]},
        ],
        selectConnector(c){this.selectedConn=c;this.$nextTick(()=>lucide.createIcons())},
        testConn(c){c.statusLabel='테스트 중...';setTimeout(()=>{c.status='connected';c.statusLabel='연결됨';c.lastTest='방금 전'},1500)},
        addConnector(){this.showAddModal=false;alert('커넥터가 추가되었습니다.')},
        init(){this.$nextTick(()=>lucide.createIcons())}
    }
}
</script>
</body>
</html>
